function resourceCallBack(){cc.game.onStart=function(){cc.view.adjustViewPort(!0),thisismobile?cc.view.setDesignResolutionSize(640,1024,cc.ResolutionPolicy.EXACT_FIT):cc.view.setDesignResolutionSize(640,1024,cc.ResolutionPolicy.SHOW_ALL),cc.view.resizeWithBrowserSize(!0),MyLoaderScene.preload(g_resources,function(){cc.director.runScene(new SysMenu.scene)},this)},cc.game.run("gameCanvas")}var Enemy=cc.Sprite.extend({lifeTime:10,enemyType:0,active:!0,speed:1,acting:1,frames:null,die:null,ctor:function(a){if(this._super(res.pig),this.enemyType=a.type,this.lifeTime=Game.EnemyType[this.enemyType].lifeTime,this.speed=Game.rndInt(1,60),2==this.enemyType){this.frames=[];for(var b=1;4>=b;b++);}this.schedule(this.attack,.2),this.schedule(this.update,1),this.attack(),this.run()},actFrames:function(){null!=this.frames&&this.runAction(cc.RepeatForever.create(cc.Animate.create(cc.Animation.create(this.frames,.1))))},run:function(){2==this.enemyType||this.runAction(cc.RepeatForever.create(cc.RotateBy.create(.3,60)))},update:function(){this.lifeTime<0&&this.active&&(this.visible=!1,this.active=!1,this.destory()),(this.enemyType<2&&this.lifeTime<0||this.lifeTime<=-2)&&(this.stopAllActions(),this.acting=0),this.lifeTime--},destory:function(){if(2==this.enemyType)for(var a=1;3>=a;a++);},attack:function(){if(Game.status==Game.STATE_PLAYING){0==this.acting&&2==this.enemyType&&(this.acting=1);var a=0,b=0,c=Game.getSanjiRate();if(Game.rndInt(0,100)<=c)a=instanceGameLayer._benko.x,b=instanceGameLayer._benko.y;else{var d=Game.rndInt(0,100);d%4==0?(a=Game.rndInt(-50,instanceGameLayer.winSize.width+50),b=Game.rndInt(-50,instanceGameLayer.winSize.height+50)):d%4==1?(a=Game.rndInt(-50,instanceGameLayer.winSize.width/2),b=Game.rndInt(-50,instanceGameLayer.winSize.height/2)):d%4==2?(a=Game.rndInt(-50,instanceGameLayer.winSize.width/2),b=Game.rndInt(instanceGameLayer.winSize.height/2,instanceGameLayer.winSize.height+50)):d%4==3?(a=Game.rndInt(instanceGameLayer.winSize.width/2,instanceGameLayer.winSize.width+50),b=Game.rndInt(-50,instanceGameLayer.winSize.height/2)):(a=Game.rndInt(instanceGameLayer.winSize.width/2,instanceGameLayer.winSize.width+50),b=Game.rndInt(instanceGameLayer.winSize.height/2,instanceGameLayer.winSize.height+50))}this.speed=Game.rndInt(1,60)*Game.getSanjiSpeed();var e=Game.getDistance(this.x,this.y,a,b),f=e/(this.speed*Game.EnemySpeedRate);this.runAction(cc.MoveTo.create(f,cc.p(a,b)))}else this.stopAllActions(),this.acting=0},collideRect:function(){return 2==this.enemyType?cc.rect(this.x-34,this.y-33,67,63):cc.rect(this.x-29,this.y-27,63,53)}});Enemy.create=function(a){var b=new Enemy(a);return instanceGameLayer.addEnemy(b),Game.Enemy.push(b),b},Enemy.getOrCreate=function(a){for(var b=null,c=0;c<Game.Enemy.length;c++)if(b=Game.Enemy[c],b.enemyType==a.type&&0==b.active&&b.lifeTime<Game.lifeTime+2)return b.active=!0,b.visible=!0,b.run(),b.attack(),b.schedule(b.attack,.2),b.schedule(b.update,1),b.lifeTime=Game.EnemyType[b.enemyType].lifeTime,this.acting=1,b;return b=new Enemy.create(a)},Enemy.preSet=function(){for(var a=0;3>a;a++)for(var b=0;20>b;b++)new Enemy.create(Game.EnemyType[a])},cc.sys.dump();var SysMenu=cc.Layer.extend({init:function(){var a=!1;if(this._super()){var b=cc.director.getWinSize(),c=this,d=new cc.Sprite(res.beginBg);d.x=b.width/2,d.y=b.height/2,this.addChild(d);var e=new cc.Sprite(res.guizeBg);e.x=b.width/2,e.y=b.height/2;var f=cc.MenuItemSprite.create(new cc.Sprite(res.beginBtn),new cc.Sprite(res.beginBtn),function(){var a=GameLayer.scene();cc.director.runScene(cc.TransitionFade.create(.8,a))},this),g=cc.Menu.create(f);g.x=b.width/2,g.y=b.height/2,this.addChild(g);var h=cc.MenuItemSprite.create(new cc.Sprite(res.guize),new cc.Sprite(res.guize),function(){c.addChild(e),c.addChild(k),g.setVisible(!1),i.setVisible(!1)},this),i=cc.Menu.create(h);i.x=b.width/2,i.y=b.height/2-200,this.addChild(i);var j=cc.MenuItemSprite.create(new cc.Sprite(res.back),new cc.Sprite(res.back),function(){c.removeChild(e),c.removeChild(k),g.setVisible(!0),i.setVisible(!0)},this),k=cc.Menu.create(j);k.x=b.width/2,k.y=b.height/2-200,a=!0}return a}});SysMenu.create=function(){var a=new SysMenu;return a&&a.init()?a:null},SysMenu.scene=function(){var a=cc.Scene.create(),b=SysMenu.create();return a.addChild(b),a};var instanceGameLayer,instanceGameScene,holdTime=0,GameLayer=cc.Layer.extend({_touchOnCloud:null,_touchEndedPos:null,pauseStartTime:0,_benko:null,_benkoStatus:1,_benkoStatusChangedTime:0,_benkoScale:1,_touchPos:null,_benkoFrame:[],_clear:1,chkCollide:0,life:1,lifeContainer:null,timer:null,score:null,winSize:null,question:null,helpBG:null,help:null,init:function(){var a=!1;if(this._super()){Game.timeCount=60,Game.SCORE=0,this.winSize=cc.director.getWinSize();var b=cc.p(this.winSize.width/2,this.winSize.height/2),c=cc.Sprite.create(res.gameBg);c.setPosition(b),this.addChild(c,1),this.helpBG=cc.Sprite.create(res.readyBg),this.helpBG.setPosition(b),this.helpBG.opacity=255,this.addChild(this.helpBG,9900),this.help=cc.Sprite.create(res.tips),this.help.setPosition(b),this.addChild(this.help,1e4),this.score=new cc.LabelTTF("60.0","Arial",70),this.score.attr({x:this.winSize.width-170,y:this.winSize.height-40}),this.addChild(this.score,1e3),this._benko=cc.Sprite.create(res.yb),this._benko.setPosition(b),this._benko.scale=this._benkoScale,this.addChild(this._benko,2e3),instanceGameLayer=this,a=!0,Game.status=Game.STATE_INIT,Game.DIE_TYPE=0,"mouse"in cc.sys.capabilities&&cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseDown:function(a){a.getCurrentTarget().beginTouch()},onMouseUp:function(a){a.getCurrentTarget().resetTouch()},onMouseMove:function(a){void 0!=a.getButton()&&a.getCurrentTarget().processEvent(a)}},this),cc.sys.capabilities.hasOwnProperty("touches")&&cc.eventManager.addListener({event:cc.EventListener.TOUCH_ALL_AT_ONCE,onTouchesBegan:function(a,b){b.getCurrentTarget().beginTouch(a[0])},onTouchesEnded:function(a,b){b.getCurrentTarget().resetTouch(a[0])},onTouchesMoved:function(a,b){b.getCurrentTarget().processEvent(a[0])}},this),this._clear=1,Game.questionUseTime=0,Game.startTime=Game.endTime=Game.getTime(),this.addEnemy2(Game.EnemyType[2]),this.scheduleUpdate(),this.schedule(this.updateTimer,1),this.schedule(this.updateScore,.1)}return a},update:function(a){this.checkCollide()},updateScore:function(){if(Game.status==Game.STATE_PLAYING){Game.endTime=Game.getEndTime();var a=((6e4-(Game.endTime-Game.startTime))/1e3).toFixed(1);this.score.setString(a),holdTime=a}},beginTouch:function(a){Game.status==Game.STATE_INIT?(this.helpBG.active=!1,this.helpBG.visible=!1,this.help.active=!1,this.help.visible=!1,Game.timeCount=59,Game.SCORE=9,Game.startTime=Game.endTime=Game.getTime(),Game.status=Game.STATE_PLAYING):Game.status==Game.STATE_PLAYING},resetTouch:function(a){this._touchPos=null},updateTimer:function(){Game.status!=Game.STATE_INIT&&(Game.status==Game.STATE_PLAYING&&Game.timeCount--,this.updateEnemy())},processEvent:function(a){if(Game.status==Game.STATE_PLAYING){if(null!=this._touchPos){var b=this._benko,c=cc.p(b.x,b.y),d=a.getLocation();this._touchEndedPos=d,c=cc.p(c.x+d.x-this._touchPos.x,c.y+d.y-this._touchPos.y),c.x>=0&&c.x<=instanceGameLayer.winSize.width?b.x=c.x:c.x<0?b.x=0:b.x=instanceGameLayer.winSize.width,c.y>=0&&c.y<=instanceGameLayer.winSize.height?b.y=c.y:c.y<0?b.y=0:b.y=instanceGameLayer.winSize.height}this._touchPos=a.getLocation()}},addEnemy2:function(a){var b=2;this._clear&&(b=5+parseInt((60-Game.timeCount)/3),Game.timeCount<15&&(b=5+parseInt((60-Game.timeCount)/3*2)),this._clear=0);for(var c=0;b>c;c++){var d=Enemy.getOrCreate(a),e=Game.rndInt(0,100);e%4==1?(d.x=Game.rndInt(-10,this.winSize.width+10),d.y=this.winSize.height+10):e%4==2?(d.x=-10,d.y=Game.rndInt(-10,this.winSize.height+10)):e%4==3?(d.x=Game.rndInt(-10,this.winSize.width+10),d.y=-10):(d.x=this.winSize.width+10,d.y=Game.rndInt(-10,this.winSize.height+10))}},updateEnemy:function(){if(Game.status==Game.STATE_PLAYING){Game.timeCount%3==0&&this.addEnemy2(Game.EnemyType[2]);var a=(6e4-(Game.endTime-Game.startTime))/1e3;if(a>20&&Game.timeCount>0&&Game.timeCount%5==0){var b=Enemy.getOrCreate(Game.EnemyType[0]);rnd=Game.rndInt(0,10),rnd%4==1?(b.x=Game.rndInt(-10,this.winSize.width+10),b.y=this.winSize.height+10):rnd%4==2?(b.x=-10,b.y=Game.rndInt(-10,this.winSize.height+10)):rnd%4==3?(b.x=Game.rndInt(-10,this.winSize.width+10),b.y=-10):(b.x=this.winSize.width+10,b.y=Game.rndInt(-10,this.winSize.height+10))}}},collidRect:function(){return cc.rect(this._benko.x-45,this._benko.y-48,90,85)},checkCollide1:function(){var a=this._benko.width,b=this._benko.height,c=.4;a*=c,b*=c;var d=this.collidRect(),e=cc.rect(498,498,4,4);cc.rectIntersectsRect(d,e)&&cc.log(Game.timeCount+" 碰撞啦~ x="+this._benko.x+", y="+this._benko.y+", w="+a+", h="+b)},checkCollide:function(){if(Game.status==Game.STATE_PLAYING){if(Game.getEndTime()-Game.startTime>60100)return Game.status==Game.STATE_PLAYING&&(Game.endTime=Game.getEndTime()),Game.status=Game.STATE_GAMEOVER,void this.gameOver();if(!this.chkCollide){for(var a=0;a<Game.Enemy.length;a++){var b=Game.Enemy[a];if(!(!b.active||!this._benkoStatus&&b.enemyType>1)){var c=this.collidRect();cc.rectIntersectsRect(c,b.collideRect())&&(0==b.enemyType||1==b.enemyType?(b.active=!1,b.visible=!1,cc.log("触发一个问题...."),this.pauseStartTime=Game.timeCount,this._benkoStatus=0,Game.status=Game.STATE_PAUSE):2==b.enemyType&&(this._benkoStatus=0,this.gameOver()))}}this.chkCollide=0}}},hurtBenko:function(){var a=cc.FadeTo.create(.2,50),b=cc.FadeTo.create(.2,255);this._benko.runAction(cc.Sequence.create(a,b,a,b,a,b,a,b,a,b,new BenkoActive)),this.life--,Game.MUSIC&&cc.audioEngine.playEffect(res.music_benkoHurt),this.updateBenkoLife()},updateBenkoLife:function(){this.life>0||(Game.DIE_TYPE=0,this.gameOver())},gameOver:function(){Game.status=Game.STATE_GAMEOVER;for(var a=0;a<Game.Enemy.length;a++){var b=Game.Enemy[a];b.active=!1,b.visible=!1}this.unschedule(this.update),this.unschedule(this.updateScore),this.unschedule(this.updateTimer),cc.director.runScene(new gameOverScene)}});GameLayer.create=function(){var a=new GameLayer;return a&&a.init()?a:null},GameLayer.scene=function(){var a=cc.Scene.create(),b=GameLayer.create();return a.addChild(b,1),instanceGameScene=a,a},GameLayer.prototype.addEnemy=function(a){this.addChild(a,10)};var BenkoActive=cc.ActionInterval.extend({ctor:function(){},update:function(){instanceGameLayer._benkoStatus=1}}),gameOverScene=cc.Scene.extend({ctor:function(){this._super();var a=cc.director.getWinSize(),b=60-parseInt(holdTime).toFixed(2),c=0;c=0==b?0:20>b?parseInt(20*Math.random()+50):40>b?parseInt(20*Math.random()+70):parseInt(9*Math.random()+90);var d=new cc.LabelTTF("坚持了"+b+"秒，打败了全国"+c+"%的玩家","Arial",36);d.x=a.width/2,d.y=a.height-200,this.addChild(d,10);var e=cc.Sprite.create(res.gameEnd);e.x=a.width/2,e.y=a.height/2,this.addChild(e);var f=cc.MenuItemSprite.create(new cc.Sprite(res.reStart),new cc.Sprite(res.reStart),function(){var a=GameLayer.scene();cc.director.runScene(cc.TransitionFade.create(.8,a))},this),g=cc.Menu.create(f);g.x=a.width/2,g.y=a.height/2,this.addChild(g);var h=cc.MenuItemSprite.create(new cc.Sprite(res.more),new cc.Sprite(res.more),function(){window.location.href=g_link},this),i=cc.Menu.create(h);i.x=a.width/2,i.y=cc.visibleRect.bottom.y+100,this.addChild(i)}}),Game=Game||{};Game.MUSIC=0,Game.status=0,Game.STATE_INIT=0,Game.STATE_PLAYING=1,Game.STATE_GAMEOVER=2,Game.STATE_PAUSE=3,Game.questionUseTime=0,Game.DIE_TYPE=0,Game.startTime=0,Game.endTime=0,Game.timeCount=0,Game.bestTime=0,Game.SCORE=0,Game.shareStatus=0,Game.scheduleTimeCount=0,Game.Enemy=[],Game.EnemySpeedRate=1,Game.EnemyType=[{type:2,lifeTime:1e6,textureName:res.pig},{type:2,lifeTime:1e6,textureName:res.pig},{type:2,lifeTime:1e6,textureName:res.pig}],Game.rndInt=function(a,b){return Math.round(Math.random()*(b-a)+a)},Game.rndString=function(a,b){var c="",d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";b&&(d=b);for(var e=d.length;a--;)c+=""+d.charAt(Game.rndInt(0,e-1));return c},Game.getRndEnemyType=function(){var a=Game.rndInt(0,100);return 20>a?Game.EnemyType[1]:Game.EnemyType[2]},Game.getDistance=function(a,b,c,d){var e=a-c,f=b-d;return Math.pow(e*e+f*f,.5)},Game.getSanjiSpeed=function(){return Game.timeCount<=5?4:Game.timeCount<=10?2.5:Game.timeCount<=15?2.1:Game.timeCount<=20?1.8:Game.timeCount<=30?1.5:Game.timeCount<=40?1.2:1},Game.getSanjiRate=function(){return Game.timeCount<=5?100:Game.timeCount<=10?90:Game.timeCount<=15?85:Game.timeCount<=20?60:Game.timeCount<=30?40:Game.timeCount<=40?30:20},Game.setCookie=function(a,b){var c=360,d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3),document.cookie=a+"="+escape(b)+";expires="+d.toGMTString()},Game.getCookie=function(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null},Game.getTime=function(){return(new Date).getTime()},Game.getEndTime=function(){return Game.getTime()-Game.questionUseTime},Game.genCookieId=function(){return(new Date).format("yyyyMMddhhmmssS")+""+Game.rndString(15,"1234567890")},Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},cc.sys.dump();var SysMenu=cc.Layer.extend({init:function(){var a=!1;if(this._super()){var b=cc.director.getWinSize(),c=this,d=new cc.Sprite(res.beginBg);d.x=b.width/2,d.y=b.height/2,this.addChild(d);var e=new cc.Sprite(res.guizeBg);e.x=b.width/2,e.y=b.height/2;var f=cc.MenuItemSprite.create(new cc.Sprite(res.beginBtn),new cc.Sprite(res.beginBtn),function(){var a=GameLayer.scene();cc.director.runScene(cc.TransitionFade.create(.8,a))},this),g=cc.Menu.create(f);g.x=b.width/2,g.y=b.height/2,this.addChild(g);var h=cc.MenuItemSprite.create(new cc.Sprite(res.guize),new cc.Sprite(res.guize),function(){c.addChild(e),c.addChild(k),g.setVisible(!1),i.setVisible(!1)},this),i=cc.Menu.create(h);i.x=b.width/2,i.y=b.height/2-200,this.addChild(i);var j=cc.MenuItemSprite.create(new cc.Sprite(res.back),new cc.Sprite(res.back),function(){c.removeChild(e),c.removeChild(k),g.setVisible(!0),i.setVisible(!0)},this),k=cc.Menu.create(j);k.x=b.width/2,k.y=b.height/2-200,a=!0}return a}});SysMenu.create=function(){var a=new SysMenu;return a&&a.init()?a:null},SysMenu.scene=function(){var a=cc.Scene.create(),b=SysMenu.create();return a.addChild(b),a};var instanceGameLayer,instanceGameScene,holdTime=0,GameLayer=cc.Layer.extend({_touchOnCloud:null,_touchEndedPos:null,pauseStartTime:0,_benko:null,_benkoStatus:1,_benkoStatusChangedTime:0,_benkoScale:1,_touchPos:null,_benkoFrame:[],_clear:1,chkCollide:0,life:1,lifeContainer:null,timer:null,score:null,winSize:null,question:null,helpBG:null,help:null,init:function(){var a=!1;if(this._super()){Game.timeCount=60,Game.SCORE=0,this.winSize=cc.director.getWinSize();var b=cc.p(this.winSize.width/2,this.winSize.height/2),c=cc.Sprite.create(res.gameBg);c.setPosition(b),this.addChild(c,1),this.helpBG=cc.Sprite.create(res.readyBg),this.helpBG.setPosition(b),this.helpBG.opacity=255,this.addChild(this.helpBG,9900),this.help=cc.Sprite.create(res.tips),this.help.setPosition(b),this.addChild(this.help,1e4),this.score=new cc.LabelTTF("60.0","Arial",70),this.score.attr({x:this.winSize.width-170,y:this.winSize.height-40}),this.addChild(this.score,1e3),this._benko=cc.Sprite.create(res.yb),this._benko.setPosition(b),this._benko.scale=this._benkoScale,this.addChild(this._benko,2e3),instanceGameLayer=this,a=!0,Game.status=Game.STATE_INIT,Game.DIE_TYPE=0,"mouse"in cc.sys.capabilities&&cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseDown:function(a){a.getCurrentTarget().beginTouch()},onMouseUp:function(a){a.getCurrentTarget().resetTouch()},onMouseMove:function(a){void 0!=a.getButton()&&a.getCurrentTarget().processEvent(a)}},this),cc.sys.capabilities.hasOwnProperty("touches")&&cc.eventManager.addListener({event:cc.EventListener.TOUCH_ALL_AT_ONCE,onTouchesBegan:function(a,b){b.getCurrentTarget().beginTouch(a[0])},onTouchesEnded:function(a,b){b.getCurrentTarget().resetTouch(a[0])},onTouchesMoved:function(a,b){b.getCurrentTarget().processEvent(a[0])}},this),this._clear=1,Game.questionUseTime=0,Game.startTime=Game.endTime=Game.getTime(),this.addEnemy2(Game.EnemyType[2]),this.scheduleUpdate(),this.schedule(this.updateTimer,1),this.schedule(this.updateScore,.1)}return a},update:function(a){this.checkCollide()},updateScore:function(){if(Game.status==Game.STATE_PLAYING){Game.endTime=Game.getEndTime();var a=((6e4-(Game.endTime-Game.startTime))/1e3).toFixed(1);this.score.setString(a),holdTime=a}},beginTouch:function(a){Game.status==Game.STATE_INIT?(this.helpBG.active=!1,this.helpBG.visible=!1,this.help.active=!1,this.help.visible=!1,Game.timeCount=59,Game.SCORE=9,Game.startTime=Game.endTime=Game.getTime(),Game.status=Game.STATE_PLAYING):Game.status==Game.STATE_PLAYING},resetTouch:function(a){this._touchPos=null},updateTimer:function(){Game.status!=Game.STATE_INIT&&(Game.status==Game.STATE_PLAYING&&Game.timeCount--,this.updateEnemy())},processEvent:function(a){if(Game.status==Game.STATE_PLAYING){if(null!=this._touchPos){var b=this._benko,c=cc.p(b.x,b.y),d=a.getLocation();this._touchEndedPos=d,c=cc.p(c.x+d.x-this._touchPos.x,c.y+d.y-this._touchPos.y),c.x>=0&&c.x<=instanceGameLayer.winSize.width?b.x=c.x:c.x<0?b.x=0:b.x=instanceGameLayer.winSize.width,c.y>=0&&c.y<=instanceGameLayer.winSize.height?b.y=c.y:c.y<0?b.y=0:b.y=instanceGameLayer.winSize.height}this._touchPos=a.getLocation()}},addEnemy2:function(a){var b=2;this._clear&&(b=5+parseInt((60-Game.timeCount)/3),Game.timeCount<15&&(b=5+parseInt((60-Game.timeCount)/3*2)),this._clear=0);for(var c=0;b>c;c++){var d=Enemy.getOrCreate(a),e=Game.rndInt(0,100);e%4==1?(d.x=Game.rndInt(-10,this.winSize.width+10),d.y=this.winSize.height+10):e%4==2?(d.x=-10,d.y=Game.rndInt(-10,this.winSize.height+10)):e%4==3?(d.x=Game.rndInt(-10,this.winSize.width+10),d.y=-10):(d.x=this.winSize.width+10,d.y=Game.rndInt(-10,this.winSize.height+10))}},updateEnemy:function(){if(Game.status==Game.STATE_PLAYING){Game.timeCount%3==0&&this.addEnemy2(Game.EnemyType[2]);var a=(6e4-(Game.endTime-Game.startTime))/1e3;if(a>20&&Game.timeCount>0&&Game.timeCount%5==0){var b=Enemy.getOrCreate(Game.EnemyType[0]);rnd=Game.rndInt(0,10),rnd%4==1?(b.x=Game.rndInt(-10,this.winSize.width+10),b.y=this.winSize.height+10):rnd%4==2?(b.x=-10,b.y=Game.rndInt(-10,this.winSize.height+10)):rnd%4==3?(b.x=Game.rndInt(-10,this.winSize.width+10),b.y=-10):(b.x=this.winSize.width+10,b.y=Game.rndInt(-10,this.winSize.height+10))}}},collidRect:function(){return cc.rect(this._benko.x-45,this._benko.y-48,90,85)},checkCollide1:function(){var a=this._benko.width,b=this._benko.height,c=.4;a*=c,b*=c;var d=this.collidRect(),e=cc.rect(498,498,4,4);cc.rectIntersectsRect(d,e)&&cc.log(Game.timeCount+" 碰撞啦~ x="+this._benko.x+", y="+this._benko.y+", w="+a+", h="+b)},checkCollide:function(){if(Game.status==Game.STATE_PLAYING){if(Game.getEndTime()-Game.startTime>60100)return Game.status==Game.STATE_PLAYING&&(Game.endTime=Game.getEndTime()),Game.status=Game.STATE_GAMEOVER,void this.gameOver();if(!this.chkCollide){for(var a=0;a<Game.Enemy.length;a++){var b=Game.Enemy[a];if(!(!b.active||!this._benkoStatus&&b.enemyType>1)){var c=this.collidRect();cc.rectIntersectsRect(c,b.collideRect())&&(0==b.enemyType||1==b.enemyType?(b.active=!1,b.visible=!1,cc.log("触发一个问题...."),this.pauseStartTime=Game.timeCount,this._benkoStatus=0,Game.status=Game.STATE_PAUSE):2==b.enemyType&&(this._benkoStatus=0,this.gameOver()))}}this.chkCollide=0}}},hurtBenko:function(){var a=cc.FadeTo.create(.2,50),b=cc.FadeTo.create(.2,255);this._benko.runAction(cc.Sequence.create(a,b,a,b,a,b,a,b,a,b,new BenkoActive)),this.life--,Game.MUSIC&&cc.audioEngine.playEffect(res.music_benkoHurt),this.updateBenkoLife()},updateBenkoLife:function(){this.life>0||(Game.DIE_TYPE=0,this.gameOver())},gameOver:function(){Game.status=Game.STATE_GAMEOVER;for(var a=0;a<Game.Enemy.length;a++){var b=Game.Enemy[a];b.active=!1,b.visible=!1}this.unschedule(this.update),this.unschedule(this.updateScore),this.unschedule(this.updateTimer),cc.director.runScene(new gameOverScene)}});GameLayer.create=function(){var a=new GameLayer;return a&&a.init()?a:null},GameLayer.scene=function(){var a=cc.Scene.create(),b=GameLayer.create();return a.addChild(b,1),instanceGameScene=a,a},GameLayer.prototype.addEnemy=function(a){this.addChild(a,10)};var BenkoActive=cc.ActionInterval.extend({ctor:function(){},update:function(){instanceGameLayer._benkoStatus=1}}),gameOverScene=cc.Scene.extend({ctor:function(){this._super();var a=cc.director.getWinSize(),b=60-parseInt(holdTime).toFixed(2),c=0;c=0==b?0:20>b?parseInt(20*Math.random()+50):40>b?parseInt(20*Math.random()+70):parseInt(9*Math.random()+90);var d=new cc.LabelTTF("坚持了"+b+"秒，打败了全国"+c+"%的玩家","Arial",36);d.x=a.width/2,d.y=a.height-200,this.addChild(d,10);var e=cc.Sprite.create(res.gameEnd);e.x=a.width/2,e.y=a.height/2,this.addChild(e);var f=cc.MenuItemSprite.create(new cc.Sprite(res.reStart),new cc.Sprite(res.reStart),function(){var a=GameLayer.scene();cc.director.runScene(cc.TransitionFade.create(.8,a))},this),g=cc.Menu.create(f);g.x=a.width/2,g.y=a.height/2,this.addChild(g);var h=cc.MenuItemSprite.create(new cc.Sprite(res.more),new cc.Sprite(res.more),function(){window.location.href=g_link},this),i=cc.Menu.create(h);i.x=a.width/2,i.y=cc.visibleRect.bottom.y+100,this.addChild(i)}}),Enemy=cc.Sprite.extend({lifeTime:10,enemyType:0,active:!0,speed:1,acting:1,frames:null,die:null,ctor:function(a){if(this._super(res.pig),this.enemyType=a.type,this.lifeTime=Game.EnemyType[this.enemyType].lifeTime,this.speed=Game.rndInt(1,60),2==this.enemyType){this.frames=[];for(var b=1;4>=b;b++);}this.schedule(this.attack,.2),this.schedule(this.update,1),this.attack(),this.run()},actFrames:function(){null!=this.frames&&this.runAction(cc.RepeatForever.create(cc.Animate.create(cc.Animation.create(this.frames,.1))))},run:function(){2==this.enemyType||this.runAction(cc.RepeatForever.create(cc.RotateBy.create(.3,60)))},update:function(){this.lifeTime<0&&this.active&&(this.visible=!1,this.active=!1,this.destory()),(this.enemyType<2&&this.lifeTime<0||this.lifeTime<=-2)&&(this.stopAllActions(),this.acting=0),this.lifeTime--},destory:function(){if(2==this.enemyType)for(var a=1;3>=a;a++);},attack:function(){if(Game.status==Game.STATE_PLAYING){0==this.acting&&2==this.enemyType&&(this.acting=1);var a=0,b=0,c=Game.getSanjiRate();if(Game.rndInt(0,100)<=c)a=instanceGameLayer._benko.x,b=instanceGameLayer._benko.y;else{var d=Game.rndInt(0,100);d%4==0?(a=Game.rndInt(-50,instanceGameLayer.winSize.width+50),b=Game.rndInt(-50,instanceGameLayer.winSize.height+50)):d%4==1?(a=Game.rndInt(-50,instanceGameLayer.winSize.width/2),b=Game.rndInt(-50,instanceGameLayer.winSize.height/2)):d%4==2?(a=Game.rndInt(-50,instanceGameLayer.winSize.width/2),b=Game.rndInt(instanceGameLayer.winSize.height/2,instanceGameLayer.winSize.height+50)):d%4==3?(a=Game.rndInt(instanceGameLayer.winSize.width/2,instanceGameLayer.winSize.width+50),b=Game.rndInt(-50,instanceGameLayer.winSize.height/2)):(a=Game.rndInt(instanceGameLayer.winSize.width/2,instanceGameLayer.winSize.width+50),b=Game.rndInt(instanceGameLayer.winSize.height/2,instanceGameLayer.winSize.height+50))}this.speed=Game.rndInt(1,60)*Game.getSanjiSpeed();var e=Game.getDistance(this.x,this.y,a,b),f=e/(this.speed*Game.EnemySpeedRate);this.runAction(cc.MoveTo.create(f,cc.p(a,b)))}else this.stopAllActions(),this.acting=0},collideRect:function(){return 2==this.enemyType?cc.rect(this.x-34,this.y-33,67,63):cc.rect(this.x-29,this.y-27,63,53)}});Enemy.create=function(a){var b=new Enemy(a);return instanceGameLayer.addEnemy(b),Game.Enemy.push(b),b},Enemy.getOrCreate=function(a){for(var b=null,c=0;c<Game.Enemy.length;c++)if(b=Game.Enemy[c],b.enemyType==a.type&&0==b.active&&b.lifeTime<Game.lifeTime+2)return b.active=!0,b.visible=!0,b.run(),b.attack(),b.schedule(b.attack,.2),b.schedule(b.update,1),b.lifeTime=Game.EnemyType[b.enemyType].lifeTime,this.acting=1,b;return b=new Enemy.create(a)},Enemy.preSet=function(){for(var a=0;3>a;a++)for(var b=0;20>b;b++)new Enemy.create(Game.EnemyType[a])};var Game=Game||{};Game.MUSIC=0,Game.status=0,Game.STATE_INIT=0,Game.STATE_PLAYING=1,Game.STATE_GAMEOVER=2,Game.STATE_PAUSE=3,Game.questionUseTime=0,Game.DIE_TYPE=0,Game.startTime=0,Game.endTime=0,Game.timeCount=0,Game.bestTime=0,Game.SCORE=0,Game.shareStatus=0,Game.scheduleTimeCount=0,Game.Enemy=[],Game.EnemySpeedRate=1,Game.EnemyType=[{type:2,lifeTime:1e6,textureName:res.pig},{type:2,lifeTime:1e6,textureName:res.pig},{type:2,lifeTime:1e6,textureName:res.pig}],Game.rndInt=function(a,b){return Math.round(Math.random()*(b-a)+a)},Game.rndString=function(a,b){var c="",d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";b&&(d=b);for(var e=d.length;a--;)c+=""+d.charAt(Game.rndInt(0,e-1));return c},Game.getRndEnemyType=function(){var a=Game.rndInt(0,100);return 20>a?Game.EnemyType[1]:Game.EnemyType[2]},Game.getDistance=function(a,b,c,d){var e=a-c,f=b-d;return Math.pow(e*e+f*f,.5)},Game.getSanjiSpeed=function(){return Game.timeCount<=5?4:Game.timeCount<=10?2.5:Game.timeCount<=15?2.1:Game.timeCount<=20?1.8:Game.timeCount<=30?1.5:Game.timeCount<=40?1.2:1},Game.getSanjiRate=function(){return Game.timeCount<=5?100:Game.timeCount<=10?90:Game.timeCount<=15?85:Game.timeCount<=20?60:Game.timeCount<=30?40:Game.timeCount<=40?30:20},Game.setCookie=function(a,b){var c=360,d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3),document.cookie=a+"="+escape(b)+";expires="+d.toGMTString()},Game.getCookie=function(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null},Game.getTime=function(){return(new Date).getTime()},Game.getEndTime=function(){return Game.getTime()-Game.questionUseTime},Game.genCookieId=function(){return(new Date).format("yyyyMMddhhmmssS")+""+Game.rndString(15,"1234567890")},Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},cc.sys.dump();var SysMenu=cc.Layer.extend({init:function(){var a=!1;if(this._super()){var b=cc.director.getWinSize(),c=this,d=new cc.Sprite(res.beginBg);d.x=b.width/2,d.y=b.height/2,this.addChild(d);var e=new cc.Sprite(res.guizeBg);e.x=b.width/2,e.y=b.height/2;var f=cc.MenuItemSprite.create(new cc.Sprite(res.beginBtn),new cc.Sprite(res.beginBtn),function(){var a=GameLayer.scene();cc.director.runScene(cc.TransitionFade.create(.8,a))},this),g=cc.Menu.create(f);g.x=b.width/2,g.y=b.height/2,this.addChild(g);var h=cc.MenuItemSprite.create(new cc.Sprite(res.guize),new cc.Sprite(res.guize),function(){c.addChild(e),c.addChild(k),g.setVisible(!1),i.setVisible(!1)},this),i=cc.Menu.create(h);i.x=b.width/2,i.y=b.height/2-200,this.addChild(i);var j=cc.MenuItemSprite.create(new cc.Sprite(res.back),new cc.Sprite(res.back),function(){c.removeChild(e),c.removeChild(k),g.setVisible(!0),i.setVisible(!0)},this),k=cc.Menu.create(j);k.x=b.width/2,k.y=b.height/2-200,a=!0}return a}});SysMenu.create=function(){var a=new SysMenu;return a&&a.init()?a:null},SysMenu.scene=function(){var a=cc.Scene.create(),b=SysMenu.create();return a.addChild(b),a};var instanceGameLayer,instanceGameScene,holdTime=0,GameLayer=cc.Layer.extend({_touchOnCloud:null,_touchEndedPos:null,pauseStartTime:0,_benko:null,_benkoStatus:1,_benkoStatusChangedTime:0,_benkoScale:1,_touchPos:null,_benkoFrame:[],_clear:1,chkCollide:0,life:1,lifeContainer:null,timer:null,score:null,winSize:null,question:null,helpBG:null,help:null,init:function(){var a=!1;if(this._super()){Game.timeCount=60,Game.SCORE=0,this.winSize=cc.director.getWinSize();var b=cc.p(this.winSize.width/2,this.winSize.height/2),c=cc.Sprite.create(res.gameBg);c.setPosition(b),this.addChild(c,1),this.helpBG=cc.Sprite.create(res.readyBg),this.helpBG.setPosition(b),this.helpBG.opacity=255,this.addChild(this.helpBG,9900),this.help=cc.Sprite.create(res.tips),this.help.setPosition(b),this.addChild(this.help,1e4),this.score=new cc.LabelTTF("60.0","Arial",70),this.score.attr({x:this.winSize.width-170,y:this.winSize.height-40}),this.addChild(this.score,1e3),this._benko=cc.Sprite.create(res.yb),this._benko.setPosition(b),this._benko.scale=this._benkoScale,this.addChild(this._benko,2e3),instanceGameLayer=this,a=!0,Game.status=Game.STATE_INIT,Game.DIE_TYPE=0,"mouse"in cc.sys.capabilities&&cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseDown:function(a){a.getCurrentTarget().beginTouch()},onMouseUp:function(a){a.getCurrentTarget().resetTouch()},onMouseMove:function(a){void 0!=a.getButton()&&a.getCurrentTarget().processEvent(a)}},this),cc.sys.capabilities.hasOwnProperty("touches")&&cc.eventManager.addListener({event:cc.EventListener.TOUCH_ALL_AT_ONCE,onTouchesBegan:function(a,b){b.getCurrentTarget().beginTouch(a[0])},onTouchesEnded:function(a,b){b.getCurrentTarget().resetTouch(a[0])},onTouchesMoved:function(a,b){b.getCurrentTarget().processEvent(a[0])}},this),this._clear=1,Game.questionUseTime=0,Game.startTime=Game.endTime=Game.getTime(),this.addEnemy2(Game.EnemyType[2]),this.scheduleUpdate(),this.schedule(this.updateTimer,1),this.schedule(this.updateScore,.1)}return a},update:function(a){this.checkCollide()},updateScore:function(){if(Game.status==Game.STATE_PLAYING){Game.endTime=Game.getEndTime();var a=((6e4-(Game.endTime-Game.startTime))/1e3).toFixed(1);this.score.setString(a),holdTime=a}},beginTouch:function(a){Game.status==Game.STATE_INIT?(this.helpBG.active=!1,this.helpBG.visible=!1,this.help.active=!1,this.help.visible=!1,Game.timeCount=59,Game.SCORE=9,Game.startTime=Game.endTime=Game.getTime(),Game.status=Game.STATE_PLAYING):Game.status==Game.STATE_PLAYING},resetTouch:function(a){this._touchPos=null},updateTimer:function(){Game.status!=Game.STATE_INIT&&(Game.status==Game.STATE_PLAYING&&Game.timeCount--,this.updateEnemy())},processEvent:function(a){if(Game.status==Game.STATE_PLAYING){if(null!=this._touchPos){var b=this._benko,c=cc.p(b.x,b.y),d=a.getLocation();this._touchEndedPos=d,c=cc.p(c.x+d.x-this._touchPos.x,c.y+d.y-this._touchPos.y),c.x>=0&&c.x<=instanceGameLayer.winSize.width?b.x=c.x:c.x<0?b.x=0:b.x=instanceGameLayer.winSize.width,c.y>=0&&c.y<=instanceGameLayer.winSize.height?b.y=c.y:c.y<0?b.y=0:b.y=instanceGameLayer.winSize.height}this._touchPos=a.getLocation()}},addEnemy2:function(a){var b=2;this._clear&&(b=5+parseInt((60-Game.timeCount)/3),Game.timeCount<15&&(b=5+parseInt((60-Game.timeCount)/3*2)),this._clear=0);for(var c=0;b>c;c++){var d=Enemy.getOrCreate(a),e=Game.rndInt(0,100);e%4==1?(d.x=Game.rndInt(-10,this.winSize.width+10),d.y=this.winSize.height+10):e%4==2?(d.x=-10,d.y=Game.rndInt(-10,this.winSize.height+10)):e%4==3?(d.x=Game.rndInt(-10,this.winSize.width+10),d.y=-10):(d.x=this.winSize.width+10,d.y=Game.rndInt(-10,this.winSize.height+10))}},updateEnemy:function(){if(Game.status==Game.STATE_PLAYING){Game.timeCount%3==0&&this.addEnemy2(Game.EnemyType[2]);var a=(6e4-(Game.endTime-Game.startTime))/1e3;if(a>20&&Game.timeCount>0&&Game.timeCount%5==0){var b=Enemy.getOrCreate(Game.EnemyType[0]);rnd=Game.rndInt(0,10),rnd%4==1?(b.x=Game.rndInt(-10,this.winSize.width+10),b.y=this.winSize.height+10):rnd%4==2?(b.x=-10,b.y=Game.rndInt(-10,this.winSize.height+10)):rnd%4==3?(b.x=Game.rndInt(-10,this.winSize.width+10),b.y=-10):(b.x=this.winSize.width+10,b.y=Game.rndInt(-10,this.winSize.height+10))}}},collidRect:function(){return cc.rect(this._benko.x-45,this._benko.y-48,90,85)},checkCollide1:function(){var a=this._benko.width,b=this._benko.height,c=.4;
a*=c,b*=c;var d=this.collidRect(),e=cc.rect(498,498,4,4);cc.rectIntersectsRect(d,e)&&cc.log(Game.timeCount+" 碰撞啦~ x="+this._benko.x+", y="+this._benko.y+", w="+a+", h="+b)},checkCollide:function(){if(Game.status==Game.STATE_PLAYING){if(Game.getEndTime()-Game.startTime>60100)return Game.status==Game.STATE_PLAYING&&(Game.endTime=Game.getEndTime()),Game.status=Game.STATE_GAMEOVER,void this.gameOver();if(!this.chkCollide){for(var a=0;a<Game.Enemy.length;a++){var b=Game.Enemy[a];if(!(!b.active||!this._benkoStatus&&b.enemyType>1)){var c=this.collidRect();cc.rectIntersectsRect(c,b.collideRect())&&(0==b.enemyType||1==b.enemyType?(b.active=!1,b.visible=!1,cc.log("触发一个问题...."),this.pauseStartTime=Game.timeCount,this._benkoStatus=0,Game.status=Game.STATE_PAUSE):2==b.enemyType&&(this._benkoStatus=0,this.gameOver()))}}this.chkCollide=0}}},hurtBenko:function(){var a=cc.FadeTo.create(.2,50),b=cc.FadeTo.create(.2,255);this._benko.runAction(cc.Sequence.create(a,b,a,b,a,b,a,b,a,b,new BenkoActive)),this.life--,Game.MUSIC&&cc.audioEngine.playEffect(res.music_benkoHurt),this.updateBenkoLife()},updateBenkoLife:function(){this.life>0||(Game.DIE_TYPE=0,this.gameOver())},gameOver:function(){Game.status=Game.STATE_GAMEOVER;for(var a=0;a<Game.Enemy.length;a++){var b=Game.Enemy[a];b.active=!1,b.visible=!1}this.unschedule(this.update),this.unschedule(this.updateScore),this.unschedule(this.updateTimer),cc.director.runScene(new gameOverScene)}});GameLayer.create=function(){var a=new GameLayer;return a&&a.init()?a:null},GameLayer.scene=function(){var a=cc.Scene.create(),b=GameLayer.create();return a.addChild(b,1),instanceGameScene=a,a},GameLayer.prototype.addEnemy=function(a){this.addChild(a,10)};var BenkoActive=cc.ActionInterval.extend({ctor:function(){},update:function(){instanceGameLayer._benkoStatus=1}}),gameOverScene=cc.Scene.extend({ctor:function(){this._super();var a=cc.director.getWinSize(),b=60-parseInt(holdTime).toFixed(2),c=0;c=0==b?0:20>b?parseInt(20*Math.random()+50):40>b?parseInt(20*Math.random()+70):parseInt(9*Math.random()+90);var d=new cc.LabelTTF("坚持了"+b+"秒，打败了全国"+c+"%的玩家","Arial",36);d.x=a.width/2,d.y=a.height-200,this.addChild(d,10);var e=cc.Sprite.create(res.gameEnd);e.x=a.width/2,e.y=a.height/2,this.addChild(e);var f=cc.MenuItemSprite.create(new cc.Sprite(res.reStart),new cc.Sprite(res.reStart),function(){var a=GameLayer.scene();cc.director.runScene(cc.TransitionFade.create(.8,a))},this),g=cc.Menu.create(f);g.x=a.width/2,g.y=a.height/2,this.addChild(g);var h=cc.MenuItemSprite.create(new cc.Sprite(res.more),new cc.Sprite(res.more),function(){window.location.href=g_link},this),i=cc.Menu.create(h);i.x=a.width/2,i.y=cc.visibleRect.bottom.y+100,this.addChild(i)}}),Enemy=cc.Sprite.extend({lifeTime:10,enemyType:0,active:!0,speed:1,acting:1,frames:null,die:null,ctor:function(a){if(this._super(res.pig),this.enemyType=a.type,this.lifeTime=Game.EnemyType[this.enemyType].lifeTime,this.speed=Game.rndInt(1,60),2==this.enemyType){this.frames=[];for(var b=1;4>=b;b++);}this.schedule(this.attack,.2),this.schedule(this.update,1),this.attack(),this.run()},actFrames:function(){null!=this.frames&&this.runAction(cc.RepeatForever.create(cc.Animate.create(cc.Animation.create(this.frames,.1))))},run:function(){2==this.enemyType||this.runAction(cc.RepeatForever.create(cc.RotateBy.create(.3,60)))},update:function(){this.lifeTime<0&&this.active&&(this.visible=!1,this.active=!1,this.destory()),(this.enemyType<2&&this.lifeTime<0||this.lifeTime<=-2)&&(this.stopAllActions(),this.acting=0),this.lifeTime--},destory:function(){if(2==this.enemyType)for(var a=1;3>=a;a++);},attack:function(){if(Game.status==Game.STATE_PLAYING){0==this.acting&&2==this.enemyType&&(this.acting=1);var a=0,b=0,c=Game.getSanjiRate();if(Game.rndInt(0,100)<=c)a=instanceGameLayer._benko.x,b=instanceGameLayer._benko.y;else{var d=Game.rndInt(0,100);d%4==0?(a=Game.rndInt(-50,instanceGameLayer.winSize.width+50),b=Game.rndInt(-50,instanceGameLayer.winSize.height+50)):d%4==1?(a=Game.rndInt(-50,instanceGameLayer.winSize.width/2),b=Game.rndInt(-50,instanceGameLayer.winSize.height/2)):d%4==2?(a=Game.rndInt(-50,instanceGameLayer.winSize.width/2),b=Game.rndInt(instanceGameLayer.winSize.height/2,instanceGameLayer.winSize.height+50)):d%4==3?(a=Game.rndInt(instanceGameLayer.winSize.width/2,instanceGameLayer.winSize.width+50),b=Game.rndInt(-50,instanceGameLayer.winSize.height/2)):(a=Game.rndInt(instanceGameLayer.winSize.width/2,instanceGameLayer.winSize.width+50),b=Game.rndInt(instanceGameLayer.winSize.height/2,instanceGameLayer.winSize.height+50))}this.speed=Game.rndInt(1,60)*Game.getSanjiSpeed();var e=Game.getDistance(this.x,this.y,a,b),f=e/(this.speed*Game.EnemySpeedRate);this.runAction(cc.MoveTo.create(f,cc.p(a,b)))}else this.stopAllActions(),this.acting=0},collideRect:function(){return 2==this.enemyType?cc.rect(this.x-34,this.y-33,67,63):cc.rect(this.x-29,this.y-27,63,53)}});Enemy.create=function(a){var b=new Enemy(a);return instanceGameLayer.addEnemy(b),Game.Enemy.push(b),b},Enemy.getOrCreate=function(a){for(var b=null,c=0;c<Game.Enemy.length;c++)if(b=Game.Enemy[c],b.enemyType==a.type&&0==b.active&&b.lifeTime<Game.lifeTime+2)return b.active=!0,b.visible=!0,b.run(),b.attack(),b.schedule(b.attack,.2),b.schedule(b.update,1),b.lifeTime=Game.EnemyType[b.enemyType].lifeTime,this.acting=1,b;return b=new Enemy.create(a)},Enemy.preSet=function(){for(var a=0;3>a;a++)for(var b=0;20>b;b++)new Enemy.create(Game.EnemyType[a])};var MyLoaderScene=cc.Scene.extend({_interval:null,_length:0,_count:0,_label:null,_className:"MyLoaderScene",init:function(){var a=this,b=a._bgLayer=cc.LayerColor.create(cc.color(32,32,32,255));b.setPosition(cc.visibleRect.bottomLeft),a.addChild(b,0);var c=24,d=cc.director.getWinSize();cc.loader.loadImg("res/loadingpage.jpg",{isCrossOrigin:!1},function(a,c){var e=cc.Sprite.create("res/loadingpage.jpg");e.setPosition(d.width/2,d.height/2),e.setScale(2),b.addChild(e,0)});var e=a._label=cc.LabelTTF.create("Loading... 0%","Arial",c);return e.setPosition(d.width/2,d.height/2-200),e.setColor(cc.color(255,255,255)),b.addChild(this._label,10),!0},_initStage:function(a,b){var c=this,d=c._texture2d=new cc.Texture2D;d.initWithElement(a),d.handleLoadedTexture();var e=c._logo=cc.Sprite.create(d);e.setScale(cc.contentScaleFactor()),e.x=b.x,e.y=b.y,c._bgLayer.addChild(e,10)},onEnter:function(){var a=this;cc.Node.prototype.onEnter.call(a),a.schedule(a._startLoading,.3)},onExit:function(){cc.Node.prototype.onExit.call(this);var a="Loading... 100%";this._label.setString(a)},initWithResources:function(a,b){"string"==typeof a&&(a=[a]),this.resources=a||[],this.cb=b},_startLoading:function(){var a=this;a.unschedule(a._startLoading);var b=a.resources;cc.loader.load(b,function(b,c,d){var e=d/c*100|0;e=Math.min(e,100),a._label.setString("Loading... "+e+"%")},function(){a.cb&&a.cb()})},_updatePercent:function(){var a=this,b=a._count,c=a._length,d=b/c*100|0;d=Math.min(d,100),a._label.setString("Loading... "+d+"%"),b>=c&&a.unschedule(a._updatePercent)}});MyLoaderScene.preload=function(a,b){var c=null;return c||(c=new MyLoaderScene,c.init()),c.initWithResources(a,b),cc.director.runScene(c),c};var thisismobile=!1;thisismobile=/AppleWebKit.*Mobile/i.test(navigator.userAgent)||/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(navigator.userAgent)?!0:!1;