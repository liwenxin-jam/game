function setup(){gameCheck&&(JCGame.vEnd=new JCStage.vEnd2),JCGame.vFooterGame=new JCStage.vFooterGame,JCGame.start=new JCStage.vStart,App.stage.addChild(JCGame.start)}function clearObj(a,b){for(i in a){var c=JCGame.start.children[i];c.desc==b&&(JCGame.start.children.splice(i,1),delete c,clearObj(a,b))}}function RadiusBtn(a,b,c,d,e,f,g,h){this.desc="RadiusBtn";var i=new createjs.Shape;i.graphics.f("#000").rr(0,0,c,d,e),i.x=a,i.y=b;var j=new createjs.Text(f,g+" Microsoft Yahei","#FFF");j.x=a+(c-j.getBounds().width)/2,j.y=b-4+(d-j.getBounds().height)/2,this.addChild(i,j),i.onClick(function(a){h()})}function ProgressBar(a,b,c){this.initialize(),this.w=a,this.h=b,this.lastCount=0;var d=b/2;this.progress=new createjs.Shape;var e=this.progress.graphics;e.setStrokeStyle(1),e.beginStroke("black"),e.rect(76,d-4,488,48),e.endStroke(),this.addChild(this.progress),this.progressText=new createjs.Text("0%","bold 24px Arial","black"),this.progressText.x=a/2,this.progressText.y=d+20,this.progressText.textAlign="center",this.progressText.textBaseline="middle",this.addChild(this.progressText),void 0==c&&(c="最酷网"),c=new createjs.Text(c,"bold 66px Arial","black"),c.x=a/2,c.y=150,c.textAlign="center",this.addChild(c),c=new createjs.Text("加载游戏资源中，请稍候...","bold 26px Arial","black"),c.x=a/2,c.y=350,c.textAlign="center",this.addChild(c)}function getResource(a){App.queue=new createjs.LoadQueue,App.queue.setMaxConnections(20);var b=new ProgressBar(W,H,void 0==a?" ":a.data.title);App.stage.addChild(b),App.queue.on("complete",_cfg.startFunc,null,!0),_cfg.img&&App.queue.loadManifest(_cfg.img,!1),b.forQueue(App.queue),App.queue.load()}var gameCheck=!1,JCGame=function(a){return a.count=0,a.hasStop=!1,a.score=0,a.space=0,a.init=!1,a.score=null==localStorage.getItem("score")?0:localStorage.getItem("score"),a.getResult=function(a){return App.queue.getResult(a)},a.playGame=function(){var b=new createjs.Bitmap(JCGame.getResult("mainbg"));App.stage.addChild(b),a.count=0,a.vHole=new JCStage.vHole,a.vHeader=new JCStage.vHeader,App.stage.addChild(a.vHole,a.vHeader),a.vCountDown=new JCStage.vCountdown,App.stage.addChild(a.vCountDown),a.countDown=JCStage.gameTime,a.score=0,a.mouseArr=[],a.vCountDown.play(function(){a.randomPush(),a.interval=setInterval(function(){a.countDown-=1,a.countDown<=0&&a.gameover()},1e3)})},a.gameover=function(){var b=new createjs.Bitmap(JCGame.getResult("mainbg"));App.stage.addChild(b);var c=new createjs.Bitmap(JCGame.getResult("bgbut"));c.x=(W-470)/2-4,c.y=585,App.stage.addChild(c),c.onClick(function(a){getResource(),App.stage.removeAllChildren()});var d=new createjs.Text(""+a.score,"34px Microsoft Yahei","#000");d.x=270,d.y=300,App.stage.addChild(d);var e=new createjs.Text("了解更多","20px Microsoft Yahei","#000");e.x=270,e.y=900,App.stage.addChild(e),e.onClick(function(a){}),clearInterval(a.interval)},a.showPush=function(){a.mousePool||(a.mousePool=[]),a.vPlay=new JCStage.vPlay,0==a.mousePool.length&&a.mousePool.push(a.vPlay);var b=a.mousePool.pop();return a.vHole.addChild(b),b},a.randomPush=function(){if(!(a.countDown<=JCStage.interval)){var b=1;if(JCGame.hasStop)return void clearInterval(a.interval);b=JCGame.count<2?1:JCGame.count<8?2:JCGame.count<23?3:4;for(var c=b,d=1e3/c;c-->0;){for(var e=Math.randomInt(JCStage.cols*JCStage.rows);a.mouseArr.indexOf(e)>=0;)e=++e%(JCStage.cols*JCStage.rows);a.mouseArr.push(e),setTimeout(function(b){!JCGame.hasStop&&a.showPush().show(b)},d*c,e)}setTimeout(a.randomPush,1e3)}},a.posHole=function(a,b){return a=a*W/4+W/8+2*a,b=b*W/4+W/8+4*(b+3)+35,[a,b]},a.posGoods=function(a,b){return a=a*W/4+W/8+2*a,b=b*W/4+W/8+4*(b+3)+10,[a,b]},a.getRank=function(a){a.score>500&&(a.score=500)},a.getInfo=function(a){a.score>500&&(a.score=500)},a}(JCGame||{}),JCStage=function(a){function b(a){var b="";return b=20>=a?"小学鸡":40>=a?"高中生":60>=a?"大学生":80>=a?"汉纸":100>=a?"达人":120>=a?"锦衣卫":140>=a?"超人":160>=a?"大神":"大王"}return a.cols=4,a.rows=5,a.gameTime=5,a.interval=1.5,a.addTime="3s",a.reduce=-10,a.increase=1,a.cdStart=!0,a.vStart=function(){this.initialize(),this.x=this.y=0,this.addChild(new createjs.Bitmap(JCGame.getResult("bgStart"))),localStorage.setItem("first","no"),JCGame.init=!0;var b=new createjs.Bitmap(JCGame.getResult("bgbut"));b.x=(W-470)/2-4,b.y=585,this.addChild(b);var c=this;b.onClick(function(a){JCGame.init=!0,console.log("success"),App.stage.removeChild(c),JCGame.playGame()}),this.addChild(new a.vFooterHome)},a.vFooterHome=function(){this.initialize(),this.x=this.y=0;var a=new createjs.Text("zuiku.com：最酷网","25px Microsoft Yahei","#333");a.x=(W-a.getBounds().width)/2,a.y=920,this.addChild(a)},a.vHole=function(){this.initialize(),this.x=W/2,this.y=H/2-30,this.regX=W/2,this.regY=H/3,this.scaleX=this.scaleY=1;for(var b=0;b<a.cols;b++)for(var c=0;c<a.rows;c++){var d=new createjs.Bitmap(JCGame.getResult("hole"));d.x=JCGame.posHole(b,c)[0],d.y=JCGame.posHole(b,c)[1],d.regX=d.regY=d.getBounds().width/2,this.addChild(d)}},a.vFooterGame=function(){this.initialize(),this.x=this.y=0;var a=new createjs.Text("zuiku.com：最酷网","25px Microsoft Yahei","#333");a.x=(W-a.getBounds().width)/2,a.y=920,this.addChild(a)},a.vCountdown=function(){this.initialize(),this.x=this.y=0;var b=new createjs.Text;b.font="520px Arial",b.color="#0059a5",b.shadow=new createjs.Shadow("#666",0,0,50),b.regX=290,b.regY=80,b.x=320,b.y=450,this.play=function(c){b.text="3",this.addChild(b),b.scaleX=3,b.scaleY=3,b.regX=b.getBounds().width/2,b.regY=b.getBounds().height/2,b.alpha=0,createjs.Tween.get(b).to({alpha:1,scaleX:1,scaleY:1},300).to({},700).call(function(){b.text="2"}).to({},900).call(function(){b.text="1",createjs.Tween.get(b).to({scaleX:1},400).to({alpha:0},200).call(function(){b.parent.removeChild(b),a.cdStart=!1,c()})})}},a.vHeader=function(){var b=new createjs.Bitmap(JCGame.getResult("header"));b.x=0,b.y=0,this.addChild(b);var c=new createjs.Shape;c.graphics.setStrokeStyle(1,"round","round").beginStroke("#000").f("#FFF").rr(0,0,168,83,20),c.x=(W-180)/2,c.y=24;var d=new createjs.Shape;d.graphics.lf(["#292626","#140e0c"],[0,1],0,0,0,130).rr(0,0,160,75,20),d.x=(W-180)/2+4,d.y=28;var e=new createjs.Text("暂停","48px Microsoft Yahei","#FFF");e.x=(W-e.getBounds().width)/2-4,e.y=42+(40-e.getBounds().height)/2;var f=new a.vStop;c.onClick(function(){a.cdStart||JCGame.hasStop||(JCGame.hasStop=!0,JCGame.space=(new Date).getTime(),App.stage.removeChild(JCGame.vHole),App.stage.addChild(JCGame.vHole),App.stage.addChild(f),App.stage.update())});var g=new createjs.Text("200","90px Arial","#cf0922");g.x=100;var h=new createjs.Text(JCGame.countDown,"100px Arial","#1a58c1");h.x=505,g.y=h.y=H/8/2+8,g.regY=h.regY=g.getBounds().height/2,this.addChild(g,h),this.on("tick",function(a){JCGame.score>=100&&(g.y=H/8/2+30,g.x=95,g.font="70px Arial"),JCGame.score<=-100&&(g.y=H/8/2+30,g.x=95,g.font="64px Arial"),g.text=JCGame.score,h.text=JCGame.countDown})},a.vPlay=function(){this.initialize(),this.mouseChildren=!1,this.bm=new createjs.Bitmap(JCGame.getResult("shit")),this.addChild(this.bm),this.onClick(function(a){target=a.target;var b=new createjs.Text;b.font="64px Arial","shit"==target.desc?(JCGame.score+=target.score,b.color="red",b.text=target.score):"addTime"==target.desc?(b.color="#0059a5",b.text="+"+target.score,JCGame.countDown=parseInt(JCGame.countDown)+3):(JCGame.score+=target.score,b.color="black",b.text="+"+target.score),target.disappear(),b.textBaseline="middle",b.regX=-b.getBounds().width/2,target.addChild(b),createjs.Tween.get(b).to({y:b.y-50,alpha:0},600).call(function(){b.parent.removeChild(b)})}),this.disappear=function(){this.removeChild(this.bm),this.mouseEnabled=!1;var a=this;setTimeout(function(){JCGame.mouseArr.remove(a.index)},500)},this.show=function(b){JCGame.count++;var c=b%a.cols,d=parseInt(b/a.cols);this.index=b,this.x=JCGame.posGoods(c,d)[0],this.y=JCGame.posGoods(c,d)[1],this.visible=!0;var e=this.getBounds();this.hitArea=new createjs.Shape,this.hitArea.graphics.beginFill("#000").drawRect(e.x,e.y,e.width,e.height);var f=Math.randomInt(2);random2=Math.randomInt(4);var g=JCGame.count;6>g?this.desc="type":g>=6&&(g%7==0?this.desc=0==random2&&JCGame.countDown>=3?"addTime":"type":g%6==0?this.desc=1==f?"shit":"type":this.desc="type"),"shit"==this.desc?(this.score=a.reduce,this.style="shit"):"addTime"==this.desc?(this.score=a.addTime,this.style="time"):(this.score=a.increase,this.style="type"),this.bm.image=JCGame.getResult(this.style),this.regX=this.regY=this.getBounds().width/2,this.scaleX=this.scaleY=.8,createjs.Tween.get(this).to({scaleX:1,scaleY:1},400,createjs.Ease.getBackOut(5)),setTimeout(function(a){a.disappear()},1e3*a.interval,this)}},a.vEnd1=function(){this.x=this.y=0;var a=new createjs.Shape;a.graphics.beginFill("#FFF").drawRect(0,0,W,H);var c=new createjs.Bitmap(JCGame.getResult("gameover01")),d=c.getBounds();c.x=(W-d.width)/2,c.y=50;this.addChild(a,c,JCGame.vFooterGame);var e=new createjs.Shape;e.graphics.f("#000").rr(0,0,260,100,50),e.x=50,e.y=485;var f=new createjs.Text("再打一次","34px Microsoft Yahei","#FFF");f.x=50+(260-f.getBounds().width)/2,f.y=481+(100-f.getBounds().height)/2,this.addChild(e,f),e.onClick(function(a){App.stage.addChild(JCGame.start),App.stage.removeChild(JCGame.vFooterGame),App.stage.removeChild(JCGame.vEnd)});var g=new createjs.Shape;g.graphics.f("#000").rr(0,0,260,100,50),g.x=325,g.y=485;var h=new createjs.Text("炫耀一发","34px Microsoft Yahei","#FFF");h.x=325+(260-h.getBounds().width)/2,h.y=481+(100-h.getBounds().height)/2,this.addChild(g,h),localStorage.setItem("score",JCGame.score);var i=localStorage.getItem("score");g.onClick(function(a){$(".share-block").show()});var j=new createjs.Text("本次共捡得：      个","34px Microsoft Yahei","#000"),d=j.getBounds();j.x=(W-d.width)/2,j.y=230;var k=new createjs.Text(i,"34px Microsoft Yahei","red");i>=100?k.x=373:100>i&&i>-100?k.x=390:k.x=370,k.y=230,this.addChild(j,k);var l=new createjs.Text(" ","34px Microsoft Yahei","#000"),d=l.getBounds();l.x=(W-d.width)/2,l.y=290;var m=new createjs.Text(" ","34px Microsoft Yahei","red"),n=m.getBounds();m.x=(W-n.width)/2+60,m.y=270;var o={container:this,rank1:l,rank2:m,score:i};if(!JCGame.init){l.text="全宇宙排名：           位",l.x=(W-l.getBounds().width)/2;var p=null==localStorage.getItem("rank")?"未知":localStorage.getItem("rank");m.text=p,m.x=100>p?380:370,m.x=p>999?355:m.x}JCGame.getRank(o),this.addChild(l,m);var q="获得称号："+b(i),r=new createjs.Text(q,"34px Microsoft Yahei","#000"),d=r.getBounds();r.x=(W-d.width)/2,r.y=345,this.addChild(r)},a.vEnd2=function(){},a.vStop=function(){var b=new createjs.Shape;b.graphics.beginFill("#000").drawRect(0,0,W,H),b.alpha=.8,this.addChild(b);var c=new createjs.Bitmap(JCGame.getResult("dialog")),d=c.getBounds();c.x=(W-d.width)/2,c.y=(H-d.height)/2-50,this.addChild(c);var e=new createjs.Text("游戏已暂停","60px Arial","#333"),d=e.getBounds();e.x=(W-d.width)/2,e.y=350,this.addChild(e);var f=new createjs.Shape;f.graphics.setStrokeStyle(1,"round","round").beginStroke("#000").f("#FFF").rr(0,0,208,83,20),f.x=(W-180)/2-12,f.y=494;var g=new createjs.Shape;g.graphics.lf(["#292626","#140e0c"],[0,1],0,0,0,130).rr(0,0,200,75,20),g.x=(W-180)/2-8,g.y=498;var h=new createjs.Text("继续","48px Microsoft Yahei","#FFF");h.x=(W-h.getBounds().width)/2,h.y=512+(40-h.getBounds().height)/2,this.addChild(f,g,h);var i=this;f.onClick(function(){JCGame.hasStop=!1,a.cdStart=!0;var b=(new Date).getTime()-JCGame.space,c=b>1500?10:1500-b;setTimeout(function(){App.stage.addChild(JCGame.vCountDown),JCGame.vCountDown.play(function(){JCGame.randomPush(),JCGame.interval=setInterval(function(){JCGame.countDown-=1,JCGame.countDown<=0&&JCGame.gameover()},1e3)})},c),App.stage.removeChild(i)})},a.vStart.prototype=new createjs.Container,a.vCountdown.prototype=new createjs.Container,a.vHeader.prototype=new createjs.Container,a.vPlay.prototype=new createjs.Container,a.vEnd1.prototype=new createjs.Container,a.vEnd2.prototype=new createjs.Container,a.vFooterHome.prototype=new createjs.Container,a.vFooterGame.prototype=new createjs.Container,a.vHole.prototype=new createjs.Container,a.vStop.prototype=new createjs.Container,createjs.DisplayObject.prototype.onClick=function(a){this.on("click",function(b){createjs.Touch.isSupported()&&b.nativeEvent.constructor==MouseEvent||a(b)})},a}(JCStage||{});!function(){Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1},Array.prototype.remove=function(a){a=this.indexOf(a),a>-1&&this.splice(a,1)},Math.randomInt=function(a){return parseInt(Math.random()*a)}}(),_cfg.startFunc=setup,RadiusBtn.prototype=new createjs.Container,ProgressBar.prototype=new createjs.Container,ProgressBar.prototype.completeCallback=function(a){},ProgressBar.prototype.progressCallback=function(a){var b=this.progress.graphics;b.setStrokeStyle(0),b.beginStroke("#0059A5"),b.beginFill("#0059A5"),b.rect(80,this.h/2,480*a.progress,40),b.endFill(),b.endStroke(),this.progressText.text=""+parseInt(100*a.progress)+"%"},ProgressBar.prototype.forQueue=function(a){this.errorList=[],a.on("complete",this.completeCallback,this,!0),a.on("progress",this.progressCallback,this),a.on("error",function(a){alert("部分资源加载失败!")},null,!0),a.on("error",function(a){this.errorList.push(a.item.src)},this)};var APP_DEPLOYMENT="WX",IS_IOS=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,IS_ANDROID=-1<navigator.userAgent.indexOf("Android"),KEY_MY_ID="myid",KEY_FOLLOWED="flw",KEY_BEST_SUFFIX=":best",W=640,H=1e3,IS_TOUCH,SCREEN_SHOW_ALL=!0,App={},App=function(a){function b(){var b=a.stage.canvas,c=window.innerWidth,d=window.innerHeight;if(SCREEN_SHOW_ALL)c/d>W/H?c=W*d/H:d=H*c/W,b.style.marginTop=0;else{var e=W*d/H;c>=e?(c=e,stage.x=0):stage.x=(c-e)/2}b.width=W,b.height=H,b.style.left="50%",b.style.marginLeft=-(c/2)+"px",b.style.width=c+"px",b.style.height=d+"px"}window.onresize=b;var c=null;return a.stage=null,a.queue=null,a.init=function(a){c=a},window.onload=function(){localStorage.removeItem("times"),a.stage=new createjs.Stage("jc"),createjs.Ticker.setFPS(60),setTimeout(b,100),(IS_TOUCH=createjs.Touch.isSupported())&&(createjs.Touch.enable(a.stage,!0),a.stage.mouseEnabled=!1);for(var c=[1,1,1,1,1],d=Math.randomInt(20);c.indexOf(d)>=0;)d=++d%20,console.log(d);createjs.Ticker.on("tick",function(){!JCGame.hasStop&&a.stage.update()}),getResource()},a}(App||{});App.init(_cfg);