function GetRandomNum(a,b){var c=b-a,d=Math.random();return a+Math.round(d*c)}function resourceCallBack(){cc.game.onStart=function(){cc.view.adjustViewPort(!0),thisismobile?cc.view.setDesignResolutionSize(640,1e3,cc.ResolutionPolicy.SHOW_ALL):cc.view.setDesignResolutionSize(640,1e3,cc.ResolutionPolicy.SHOW_ALL),cc.view.resizeWithBrowserSize(!0),game=new Game,game.init(),MyLoaderScene.preload(g_resources,function(){cc.director.runScene(new BeginScene)},this)},cc.game.run("gameCanvas")}var Zepto=function(){function a(a){return null==a?String(a):U[V.call(a)]||"object"}function b(b){return"function"==a(b)}function c(a){return null!=a&&a==a.window}function d(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function e(b){return"object"==a(b)}function f(a){return e(a)&&!c(a)&&Object.getPrototypeOf(a)==Object.prototype}function g(a){return"number"==typeof a.length}function h(a){return D.call(a,function(a){return null!=a})}function i(a){return a.length>0?x.fn.concat.apply([],a):a}function j(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function k(a){return a in G?G[a]:G[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function l(a,b){return"number"!=typeof b||H[j(a)]?b:b+"px"}function m(a){var b,c;return F[a]||(b=E.createElement(a),E.body.appendChild(b),c=getComputedStyle(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),F[a]=c),F[a]}function n(a){return"children"in a?C.call(a.children):x.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function o(a,b,c){for(w in b)c&&(f(b[w])||Z(b[w]))?(f(b[w])&&!f(a[w])&&(a[w]={}),Z(b[w])&&!Z(a[w])&&(a[w]=[]),o(a[w],b[w],c)):b[w]!==v&&(a[w]=b[w])}function p(a,b){return null==b?x(a):x(a).filter(b)}function q(a,c,d,e){return b(c)?c.call(a,d,e):c}function r(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function s(a,b){var c=a.className,d=c&&c.baseVal!==v;return b===v?d?c.baseVal:c:void(d?c.baseVal=b:a.className=b)}function t(a){var b;try{return a?"true"==a||("false"==a?!1:"null"==a?null:/^0/.test(a)||isNaN(b=Number(a))?/^[\[\{]/.test(a)?x.parseJSON(a):a:b):a}catch(c){return a}}function u(a,b){b(a);for(var c=0,d=a.childNodes.length;d>c;c++)u(a.childNodes[c],b)}var v,w,x,y,z,A,B=[],C=B.slice,D=B.filter,E=window.document,F={},G={},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,L=/^(?:body|html)$/i,M=/([A-Z])/g,N=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],P=E.createElement("table"),Q=E.createElement("tr"),R={tr:E.createElement("tbody"),tbody:P,thead:P,tfoot:P,td:Q,th:Q,"*":E.createElement("div")},S=/complete|loaded|interactive/,T=/^[\w-]*$/,U={},V=U.toString,W={},X=E.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Z=Array.isArray||function(a){return a instanceof Array};return W.matches=function(a,b){if(!b||!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=X).appendChild(a),d=~W.qsa(e,b).indexOf(a),f&&X.removeChild(a),d},z=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},A=function(a){return D.call(a,function(b,c){return a.indexOf(b)==c})},W.fragment=function(a,b,c){var d,e,g;return J.test(a)&&(d=x(E.createElement(RegExp.$1))),d||(a.replace&&(a=a.replace(K,"<$1></$2>")),b===v&&(b=I.test(a)&&RegExp.$1),b in R||(b="*"),g=R[b],g.innerHTML=""+a,d=x.each(C.call(g.childNodes),function(){g.removeChild(this)})),f(c)&&(e=x(d),x.each(c,function(a,b){N.indexOf(a)>-1?e[a](b):e.attr(a,b)})),d},W.Z=function(a,b){return a=a||[],a.__proto__=x.fn,a.selector=b||"",a},W.isZ=function(a){return a instanceof W.Z},W.init=function(a,c){var d;if(!a)return W.Z();if("string"==typeof a)if(a=a.trim(),"<"==a[0]&&I.test(a))d=W.fragment(a,RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}else{if(b(a))return x(E).ready(a);if(W.isZ(a))return a;if(Z(a))d=h(a);else if(e(a))d=[a],a=null;else if(I.test(a))d=W.fragment(a.trim(),RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}}return W.Z(d,a)},x=function(a,b){return W.init(a,b)},x.extend=function(a){var b,c=C.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){o(a,c,b)}),a},W.qsa=function(a,b){var c,e="#"==b[0],f=!e&&"."==b[0],g=e||f?b.slice(1):b,h=T.test(g);return d(a)&&h&&e?(c=a.getElementById(g))?[c]:[]:1!==a.nodeType&&9!==a.nodeType?[]:C.call(h&&!e?f?a.getElementsByClassName(g):a.getElementsByTagName(b):a.querySelectorAll(b))},x.contains=E.documentElement.contains?function(a,b){return a!==b&&a.contains(b)}:function(a,b){for(;b&&(b=b.parentNode);)if(b===a)return!0;return!1},x.type=a,x.isFunction=b,x.isWindow=c,x.isArray=Z,x.isPlainObject=f,x.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},x.inArray=function(a,b,c){return B.indexOf.call(b,a,c)},x.camelCase=z,x.trim=function(a){return null==a?"":String.prototype.trim.call(a)},x.uuid=0,x.support={},x.expr={},x.map=function(a,b){var c,d,e,f=[];if(g(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return i(f)},x.each=function(a,b){var c,d;if(g(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},x.grep=function(a,b){return D.call(a,b)},window.JSON&&(x.parseJSON=JSON.parse),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){U["[object "+b+"]"]=b.toLowerCase()}),x.fn={forEach:B.forEach,reduce:B.reduce,push:B.push,sort:B.sort,indexOf:B.indexOf,concat:B.concat,map:function(a){return x(x.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return x(C.apply(this,arguments))},ready:function(a){return S.test(E.readyState)&&E.body?a(x):E.addEventListener("DOMContentLoaded",function(){a(x)},!1),this},get:function(a){return a===v?C.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return B.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return b(a)?this.not(this.not(a)):x(D.call(this,function(b){return W.matches(b,a)}))},add:function(a,b){return x(A(this.concat(x(a,b))))},is:function(a){return this.length>0&&W.matches(this[0],a)},not:function(a){var c=[];if(b(a)&&a.call!==v)this.each(function(b){a.call(this,b)||c.push(this)});else{var d="string"==typeof a?this.filter(a):g(a)&&b(a.item)?C.call(a):x(a);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return x(c)},has:function(a){return this.filter(function(){return e(a)?x.contains(this,a):x(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!e(a)?a:x(a)},last:function(){var a=this[this.length-1];return a&&!e(a)?a:x(a)},find:function(a){var b,c=this;return b=a?"object"==typeof a?x(a).filter(function(){var a=this;return B.some.call(c,function(b){return x.contains(b,a)})}):1==this.length?x(W.qsa(this[0],a)):this.map(function(){return W.qsa(this,a)}):[]},closest:function(a,b){var c=this[0],e=!1;for("object"==typeof a&&(e=x(a));c&&!(e?e.indexOf(c)>=0:W.matches(c,a));)c=c!==b&&!d(c)&&c.parentNode;return x(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=x.map(c,function(a){return(a=a.parentNode)&&!d(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return p(b,a)},parent:function(a){return p(A(this.pluck("parentNode")),a)},children:function(a){return p(this.map(function(){return n(this)}),a)},contents:function(){return this.map(function(){return C.call(this.childNodes)})},siblings:function(a){return p(this.map(function(a,b){return D.call(n(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return x.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=m(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var c=b(a);if(this[0]&&!c)var d=x(a).get(0),e=d.parentNode||this.length>1;return this.each(function(b){x(this).wrapAll(c?a.call(this,b):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){x(this[0]).before(a=x(a));for(var b;(b=a.children()).length;)a=b.first();x(a).append(this)}return this},wrapInner:function(a){var c=b(a);return this.each(function(b){var d=x(this),e=d.contents(),f=c?a.call(this,b):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(x(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=x(this);(a===v?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return x(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return x(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0 in arguments?this.each(function(b){var c=this.innerHTML;x(this).empty().append(q(this,a,b,c))}):0 in this?this[0].innerHTML:null},text:function(a){return 0 in arguments?this.each(function(b){var c=q(this,a,b,this.textContent);this.textContent=null==c?"":""+c}):0 in this?this[0].textContent:null},attr:function(a,b){var c;return"string"!=typeof a||1 in arguments?this.each(function(c){if(1===this.nodeType)if(e(a))for(w in a)r(this,w,a[w]);else r(this,a,q(this,b,c,this.getAttribute(a)))}):this.length&&1===this[0].nodeType?!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:v},removeAttr:function(a){return this.each(function(){1===this.nodeType&&r(this,a)})},prop:function(a,b){return a=Y[a]||a,1 in arguments?this.each(function(c){this[a]=q(this,b,c,this[a])}):this[0]&&this[0][a]},data:function(a,b){var c="data-"+a.replace(M,"-$1").toLowerCase(),d=1 in arguments?this.attr(c,b):this.attr(c);return null!==d?t(d):v},val:function(a){return 0 in arguments?this.each(function(b){this.value=q(this,a,b,this.value)}):this[0]&&(this[0].multiple?x(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each(function(b){var c=x(this),d=q(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(!this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(b,c){if(arguments.length<2){var d=this[0],e=getComputedStyle(d,"");if(!d)return;if("string"==typeof b)return d.style[z(b)]||e.getPropertyValue(b);if(Z(b)){var f={};return x.each(Z(b)?b:[b],function(a,b){f[b]=d.style[z(b)]||e.getPropertyValue(b)}),f}}var g="";if("string"==a(b))c||0===c?g=j(b)+":"+l(b,c):this.each(function(){this.style.removeProperty(j(b))});else for(w in b)b[w]||0===b[w]?g+=j(w)+":"+l(w,b[w])+";":this.each(function(){this.style.removeProperty(j(w))});return this.each(function(){this.style.cssText+=";"+g})},index:function(a){return a?this.indexOf(x(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return a?B.some.call(this,function(a){return this.test(s(a))},k(a)):!1},addClass:function(a){return a?this.each(function(b){y=[];var c=s(this),d=q(this,a,b,c);d.split(/\s+/g).forEach(function(a){x(this).hasClass(a)||y.push(a)},this),y.length&&s(this,c+(c?" ":"")+y.join(" "))}):this},removeClass:function(a){return this.each(function(b){return a===v?s(this,""):(y=s(this),q(this,a,b,y).split(/\s+/g).forEach(function(a){y=y.replace(k(a)," ")}),void s(this,y.trim()))})},toggleClass:function(a,b){return a?this.each(function(c){var d=x(this),e=q(this,a,c,s(this));e.split(/\s+/g).forEach(function(a){(b===v?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})}):this},scrollTop:function(a){if(this.length){var b="scrollTop"in this[0];return a===v?b?this[0].scrollTop:this[0].pageYOffset:this.each(b?function(){this.scrollTop=a}:function(){this.scrollTo(this.scrollX,a)})}},scrollLeft:function(a){if(this.length){var b="scrollLeft"in this[0];return a===v?b?this[0].scrollLeft:this[0].pageXOffset:this.each(b?function(){this.scrollLeft=a}:function(){this.scrollTo(a,this.scrollY)})}},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=L.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(x(a).css("margin-top"))||0,c.left-=parseFloat(x(a).css("margin-left"))||0,d.top+=parseFloat(x(b[0]).css("border-top-width"))||0,d.left+=parseFloat(x(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||E.body;a&&!L.test(a.nodeName)&&"static"==x(a).css("position");)a=a.offsetParent;return a})}},x.fn.detach=x.fn.remove,["width","height"].forEach(function(a){var b=a.replace(/./,function(a){return a[0].toUpperCase()});x.fn[a]=function(e){var f,g=this[0];return e===v?c(g)?g["inner"+b]:d(g)?g.documentElement["scroll"+b]:(f=this.offset())&&f[a]:this.each(function(b){g=x(this),g.css(a,q(this,e,b,g[a]()))})}}),O.forEach(function(b,c){var d=c%2;x.fn[b]=function(){var b,e,f=x.map(arguments,function(c){return b=a(c),"object"==b||"array"==b||null==c?c:W.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0==c?b.nextSibling:1==c?b.firstChild:2==c?b:null;var h=x.contains(E.documentElement,e);f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return x(a).remove();e.insertBefore(a,b),h&&u(a,function(a){null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},x.fn[d?b+"To":"insert"+(c?"Before":"After")]=function(a){return x(a)[b](this),this}}),W.Z.prototype=x.fn,W.uniq=A,W.deserializeValue=t,x.zepto=W,x}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(a){function b(a){return a._zid||(a._zid=m++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(q[b(a)]||[]).filter(function(a){return!(!a||c.e&&a.e!=c.e||c.ns&&!h.test(a.ns)||f&&b(a.fn)!==b(f)||g&&a.sel!=g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(a,b){return a.del&&!s&&a.e in t||!!b}function g(a){return u[a]||s&&t[a]||a}function h(c,e,h,i,k,m,n){var o=b(c),p=q[o]||(q[o]=[]);e.split(/\s/).forEach(function(b){if("ready"==b)return a(document).ready(h);var e=d(b);e.fn=h,e.sel=k,e.e in u&&(h=function(b){var c=b.relatedTarget;return!c||c!==this&&!a.contains(this,c)?e.fn.apply(this,arguments):void 0}),e.del=m;var o=m||h;e.proxy=function(a){if(a=j(a),!a.isImmediatePropagationStopped()){a.data=i;var b=o.apply(c,a._args==l?[a]:[a].concat(a._args));return b===!1&&(a.preventDefault(),a.stopPropagation()),b}},e.i=p.length,p.push(e),"addEventListener"in c&&c.addEventListener(g(e.e),e.proxy,f(e,n))})}function i(a,d,e,h,i){var j=b(a);(d||"").split(/\s/).forEach(function(b){c(a,b,e,h).forEach(function(b){delete q[j][b.i],"removeEventListener"in a&&a.removeEventListener(g(b.e),b.proxy,f(b,i))})})}function j(b,c){return(c||!b.isDefaultPrevented)&&(c||(c=b),a.each(y,function(a,d){var e=c[a];b[a]=function(){return this[d]=v,e&&e.apply(c,arguments)},b[d]=w}),(c.defaultPrevented!==l?c.defaultPrevented:"returnValue"in c?c.returnValue===!1:c.getPreventDefault&&c.getPreventDefault())&&(b.isDefaultPrevented=v)),b}function k(a){var b,c={originalEvent:a};for(b in a)x.test(b)||a[b]===l||(c[b]=a[b]);return j(c,a)}var l,m=1,n=Array.prototype.slice,o=a.isFunction,p=function(a){return"string"==typeof a},q={},r={},s="onfocusin"in window,t={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",a.event={add:h,remove:i},a.proxy=function(c,d){var e=2 in arguments&&n.call(arguments,2);if(o(c)){var f=function(){return c.apply(d,e?e.concat(n.call(arguments)):arguments)};return f._zid=b(c),f}if(p(d))return e?(e.unshift(c[d],c),a.proxy.apply(null,e)):a.proxy(c[d],c);throw new TypeError("expected function")},a.fn.bind=function(a,b,c){return this.on(a,b,c)},a.fn.unbind=function(a,b){return this.off(a,b)},a.fn.one=function(a,b,c,d){return this.on(a,b,c,d,1)};var v=function(){return!0},w=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(a,b,c){return this.on(b,a,c)},a.fn.undelegate=function(a,b,c){return this.off(b,a,c)},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d,e,f){var g,j,m=this;return b&&!p(b)?(a.each(b,function(a,b){m.on(a,c,d,b,f)}),m):(p(c)||o(e)||e===!1||(e=d,d=c,c=l),(o(d)||d===!1)&&(e=d,d=l),e===!1&&(e=w),m.each(function(l,m){f&&(g=function(a){return i(m,a.type,e),e.apply(this,arguments)}),c&&(j=function(b){var d,f=a(b.target).closest(c,m).get(0);return f&&f!==m?(d=a.extend(k(b),{currentTarget:f,liveFired:m}),(g||e).apply(f,[d].concat(n.call(arguments,1)))):void 0}),h(m,b,e,d,c,j||g)}))},a.fn.off=function(b,c,d){var e=this;return b&&!p(b)?(a.each(b,function(a,b){e.off(a,c,b)}),e):(p(c)||o(d)||d===!1||(d=c,c=l),d===!1&&(d=w),e.each(function(){i(this,b,d,c)}))},a.fn.trigger=function(b,c){return b=p(b)||a.isPlainObject(b)?a.Event(b):j(b),b._args=c,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(b):a(this).triggerHandler(b,c)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=k(p(b)?a.Event(b):b),e._args=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.trigger(b)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.each(function(){try{this[b]()}catch(a){}}),this}}),a.Event=function(a,b){p(a)||(b=a,a=b.type);var c=document.createEvent(r[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0),j(c)}}(Zepto),function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.isDefaultPrevented()}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)===!1||c(b,d,"ajaxBeforeSend",[a,b])===!1?!1:void c(b,d,"ajaxSend",[a,b])}function g(a,b,d,e){var f=d.context,g="success";d.success.call(f,a,g,b),e&&e.resolveWith(f,[a,g,b]),c(d,f,"ajaxSuccess",[b,d,a]),i(g,b,d)}function h(a,b,d,e,f){var g=e.context;e.error.call(g,d,b,a),f&&f.rejectWith(g,[d,b,a]),c(e,g,"ajaxError",[d,e,a||b]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a=a.split(";",2)[0]),a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return""==b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){b.processData&&b.data&&"string"!=a.type(b.data)&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data),b.data=void 0)}function n(b,c,d,e){return a.isFunction(c)&&(e=d,d=c,c=void 0),a.isFunction(d)||(e=d,d=void 0),{url:b,data:c,success:d,dataType:e}}function o(b,c,d,e){var f,g=a.isArray(c),h=a.isPlainObject(c);a.each(c,function(c,i){f=a.type(i),e&&(c=d?e:e+"["+(h||"object"==f||"array"==f?c:"")+"]"),!e&&g?b.add(i.name,i.value):"array"==f||!d&&"object"==f?o(b,i,d,c):b.add(c,i)})}var p,q,r=0,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/;a.active=0,a.ajaxJSONP=function(b,c){if(!("type"in b))return a.ajax(b);var d,e,i=b.jsonpCallback,j=(a.isFunction(i)?i():i)||"jsonp"+ ++r,k=s.createElement("script"),l=window[j],m=function(b){a(k).triggerHandler("error",b||"abort")},n={abort:m};return c&&c.promise(n),a(k).on("load error",function(f,i){clearTimeout(e),a(k).off().remove(),"error"!=f.type&&d?g(d[0],n,b,c):h(null,i||"error",n,b,c),window[j]=l,d&&a.isFunction(l)&&l(d[0]),l=d=void 0}),f(n,b)===!1?(m("abort"),n):(window[j]=function(){d=arguments},k.src=b.url.replace(/\?(.+)=\?/,"?$1="+j),s.head.appendChild(k),b.timeout>0&&(e=setTimeout(function(){m("timeout")},b.timeout)),n)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c=a.extend({},b||{}),e=a.Deferred&&a.Deferred();for(p in a.ajaxSettings)void 0===c[p]&&(c[p]=a.ajaxSettings[p]);d(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host),c.url||(c.url=window.location.toString()),m(c);var i=c.dataType,n=/\?.+=\?/.test(c.url);if(n&&(i="jsonp"),c.cache!==!1&&(b&&b.cache===!0||"script"!=i&&"jsonp"!=i)||(c.url=l(c.url,"_="+Date.now())),"jsonp"==i)return n||(c.url=l(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),a.ajaxJSONP(c,e);var o,r=c.accepts[i],s={},t=function(a,b){s[a.toLowerCase()]=[a,b]},u=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,v=c.xhr(),w=v.setRequestHeader;if(e&&e.promise(v),c.crossDomain||t("X-Requested-With","XMLHttpRequest"),t("Accept",r||"*/*"),(r=c.mimeType||r)&&(r.indexOf(",")>-1&&(r=r.split(",",2)[0]),v.overrideMimeType&&v.overrideMimeType(r)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&t("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(q in c.headers)t(q,c.headers[q]);if(v.setRequestHeader=t,v.onreadystatechange=function(){if(4==v.readyState){v.onreadystatechange=j,clearTimeout(o);var b,d=!1;if(v.status>=200&&v.status<300||304==v.status||0==v.status&&"file:"==u){i=i||k(c.mimeType||v.getResponseHeader("content-type")),b=v.responseText;try{"script"==i?(1,eval)(b):"xml"==i?b=v.responseXML:"json"==i&&(b=y.test(b)?null:a.parseJSON(b))}catch(f){d=f}d?h(d,"parsererror",v,c,e):g(b,v,c,e)}else h(v.statusText||null,v.status?"error":"abort",v,c,e)}},f(v,c)===!1)return v.abort(),h(null,"abort",v,c,e),v;if(c.xhrFields)for(q in c.xhrFields)v[q]=c.xhrFields[q];var x="async"in c?c.async:!0;v.open(c.type,c.url,x,c.username,c.password);for(q in s)w.apply(v,s[q]);return c.timeout>0&&(o=setTimeout(function(){v.onreadystatechange=j,v.abort(),h(null,"timeout",v,c,e)},c.timeout)),v.send(c.data?c.data:null),v},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var b=n.apply(null,arguments);return b.type="POST",a.ajax(b)},a.getJSON=function(){var b=n.apply(null,arguments);return b.dataType="json",a.ajax(b)},a.fn.load=function(b,c,d){if(!this.length)return this;var e,f=this,g=b.split(/\s/),h=n(b,c,d),i=h.success;return g.length>1&&(h.url=g[0],e=g[1]),h.success=function(b){f.html(e?a("<div>").html(b.replace(t,"")).find(e):b),i&&i.apply(f,arguments)},a.ajax(h),this};var z=encodeURIComponent;a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(z(a)+"="+z(b))},o(c,a,b),c.join("&").replace(/%20/g,"+")}}(Zepto),function(a){a.fn.serializeArray=function(){var b,c=[];return a([].slice.call(this.get(0).elements)).each(function(){b=a(this);var d=b.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=d&&"reset"!=d&&"button"!=d&&("radio"!=d&&"checkbox"!=d||this.checked)&&c.push({name:b.attr("name"),value:b.val()})}),c},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(b)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(a){"__proto__"in{}||a.extend(a.zepto,{Z:function(b,c){return b=b||[],a.extend(b,a.fn),b.selector=c||"",b.__Z=!0,b},isZ:function(b){return"array"===a.type(b)&&"__Z"in b}});try{getComputedStyle(void 0)}catch(b){var c=getComputedStyle;window.getComputedStyle=function(a){try{return c(a)}catch(b){return null}}}}(Zepto),!function(){var a={},b=null,c=!0,d=!1;try{"undefined"!=typeof AudioContext?b=new AudioContext:"undefined"!=typeof webkitAudioContext?b=new webkitAudioContext:c=!1}catch(e){c=!1}if(!c)if("undefined"!=typeof Audio)try{new Audio}catch(e){d=!0}else d=!0;if(c){var f=void 0===b.createGain?b.createGainNode():b.createGain();f.gain.value=1,f.connect(b.destination)}var g=function(a){this._volume=1,this._muted=!1,this.usingWebAudio=c,this.ctx=b,this.noAudio=d,this._howls=[],this._codecs=a,this.iOSAutoEnable=!0};g.prototype={volume:function(a){var b=this;if(a=parseFloat(a),a>=0&&1>=a){b._volume=a,c&&(f.gain.value=a);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].volume=b._howls[d]._volume*b._volume;return b}return c?f.gain.value:b._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(a){var b=this;b._muted=a,c&&(f.gain.value=a?0:b._volume);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].muted=a},codecs:function(a){return this._codecs[a]},_enableiOSAudio:function(){var a=this;if(!b||!a._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){a._iOSEnabled=!1;var c=function(){var d=b.createBuffer(1,1,22050),e=b.createBufferSource();e.buffer=d,e.connect(b.destination),void 0===e.start?e.noteOn(0):e.start(0),setTimeout(function(){(e.playbackState===e.PLAYING_STATE||e.playbackState===e.FINISHED_STATE)&&(a._iOSEnabled=!0,a.iOSAutoEnable=!1,window.removeEventListener("touchstart",c,!1))},0)};return window.addEventListener("touchstart",c,!1),a}}};var h=null,i={};d||(h=new Audio,i={mp3:!!h.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!h.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var j=new g(i),k=function(a){var d=this;d._autoplay=a.autoplay||!1,d._buffer=a.buffer||!1,d._duration=a.duration||0,d._format=a.format||null,d._loop=a.loop||!1,d._loaded=!1,d._sprite=a.sprite||{},d._src=a.src||"",d._pos3d=a.pos3d||[0,0,-.5],d._volume=void 0!==a.volume?a.volume:1,d._urls=a.urls||[],d._rate=a.rate||1,d._model=a.model||null,d._onload=[a.onload||function(){}],d._onloaderror=[a.onloaderror||function(){}],d._onend=[a.onend||function(){}],d._onpause=[a.onpause||function(){}],d._onplay=[a.onplay||function(){}],d._onendTimer=[],d._webAudio=c&&!d._buffer,d._audioNode=[],d._webAudio&&d._setupAudioNode(),void 0!==b&&b&&j.iOSAutoEnable&&j._enableiOSAudio(),j._howls.push(d),d.load()};if(k.prototype={load:function(){var a=this,b=null;if(d)return void a.on("loaderror");for(var c=0;c<a._urls.length;c++){var e,f;if(a._format)e=a._format;else{if(f=a._urls[c],e=/^data:audio\/([^;,]+);/i.exec(f),e||(e=/\.([^.]+)$/.exec(f.split("?",1)[0])),!e)return void a.on("loaderror");e=e[1].toLowerCase()}if(i[e]){b=a._urls[c];break}}if(!b)return void a.on("loaderror");if(a._src=b,a._webAudio)l(a,b);else{var h=new Audio;h.addEventListener("error",function(){h.error&&4===h.error.code&&(g.noAudio=!0),a.on("loaderror",{type:h.error?h.error.code:0})},!1),a._audioNode.push(h),h.src=b,h._pos=0,h.preload="auto",h.volume=j._muted?0:a._volume*j.volume();var k=function(){a._duration=Math.ceil(10*h.duration)/10,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play(),h.removeEventListener("canplaythrough",k,!1)};h.addEventListener("canplaythrough",k,!1),h.load()}return a},urls:function(a){var b=this;return a?(b.stop(),b._urls="string"==typeof a?[a]:a,b._loaded=!1,b.load(),b):b._urls},play:function(a,c){var d=this;return"function"==typeof a&&(c=a),a&&"function"!=typeof a||(a="_default"),d._loaded?d._sprite[a]?(d._inactiveNode(function(e){e._sprite=a;var f=e._pos>0?e._pos:d._sprite[a][0]/1e3,g=0;d._webAudio?(g=d._sprite[a][1]/1e3-e._pos,e._pos>0&&(f=d._sprite[a][0]/1e3+f)):g=d._sprite[a][1]/1e3-(f-d._sprite[a][0]/1e3);var h,i=!(!d._loop&&!d._sprite[a][2]),k="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){var b={id:k,sprite:a,loop:i};h=setTimeout(function(){!d._webAudio&&i&&d.stop(b.id).play(a,b.id),d._webAudio&&!i&&(d._nodeById(b.id).paused=!0,d._nodeById(b.id)._pos=0,d._clearEndTimer(b.id)),d._webAudio||i||d.stop(b.id),d.on("end",k)},1e3*g),d._onendTimer.push({timer:h,id:b.id})}(),d._webAudio){var l=d._sprite[a][0]/1e3,m=d._sprite[a][1]/1e3;e.id=k,e.paused=!1,o(d,[i,l,m],k),d._playStart=b.currentTime,e.gain.value=d._volume,void 0===e.bufferSource.start?e.bufferSource.noteGrainOn(0,f,g):e.bufferSource.start(0,f,g)}else{if(4!==e.readyState&&(e.readyState||!navigator.isCocoonJS))return d._clearEndTimer(k),function(){var b=d,f=a,g=c,h=e,i=function(){b.play(f,g),h.removeEventListener("canplaythrough",i,!1)};h.addEventListener("canplaythrough",i,!1)}(),d;e.readyState=4,e.id=k,e.currentTime=f,e.muted=j._muted||e.muted,e.volume=d._volume*j.volume(),setTimeout(function(){e.play()},0)}return d.on("play"),"function"==typeof c&&c(k),d}),d):("function"==typeof c&&c(),d):(d.on("load",function(){d.play(a,c)}),d)},pause:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.pause(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=b.pos(null,a),b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0,void 0===c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else c.pause();return b.on("pause"),b},stop:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.stop(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=0,b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0,void 0===c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else isNaN(c.duration)||(c.pause(),c.currentTime=0);return b},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=0:c.muted=!0),b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){
b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=b._volume:c.muted=!1),b},volume:function(a,b){var c=this;if(a=parseFloat(a),a>=0&&1>=a){if(c._volume=a,!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):c._activeNode();return d&&(c._webAudio?d.gain.value=a:d.volume=a*j.volume()),c}return c._volume},loop:function(a){var b=this;return"boolean"==typeof a?(b._loop=a,b):b._loop},sprite:function(a){var b=this;return"object"==typeof a?(b._sprite=a,b):b._sprite},pos:function(a,c){var d=this;if(!d._loaded)return d.on("load",function(){d.pos(a)}),"number"==typeof a?d:d._pos||0;a=parseFloat(a);var e=c?d._nodeById(c):d._activeNode();if(e)return a>=0?(d.pause(c),e._pos=a,d.play(e._sprite,c),d):d._webAudio?e._pos+(b.currentTime-d._playStart):e.currentTime;if(a>=0)return d;for(var f=0;f<d._audioNode.length;f++)if(d._audioNode[f].paused&&4===d._audioNode[f].readyState)return d._webAudio?d._audioNode[f]._pos:d._audioNode[f].currentTime},pos3d:function(a,b,c,d){var e=this;if(b=void 0!==b&&b?b:0,c=void 0!==c&&c?c:-.5,!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(!(a>=0||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,b,c],f.panner.setPosition(a,b,c),f.panner.panningModel=e._model||"HRTF")}return e},fade:function(a,b,c,d,e){var f=this,g=Math.abs(a-b),h=a>b?"down":"up",i=g/.01,j=c/i;if(!f._loaded)return f.on("load",function(){f.fade(a,b,c,d,e)}),f;f.volume(a,e);for(var k=1;i>=k;k++)!function(){var a=f._volume+("up"===h?.01:-.01)*k,c=Math.round(1e3*a)/1e3,g=b;setTimeout(function(){f.volume(c,e),c===g&&d&&d()},j*k)}()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var e=this;return e.fade(e._volume,a,b,function(){c&&c(),e.pause(d),e.on("end")},d)},_nodeById:function(a){for(var b=this,c=b._audioNode[0],d=0;d<b._audioNode.length;d++)if(b._audioNode[d].id===a){c=b._audioNode[d];break}return c},_activeNode:function(){for(var a=this,b=null,c=0;c<a._audioNode.length;c++)if(!a._audioNode[c].paused){b=a._audioNode[c];break}return a._drainPool(),b},_inactiveNode:function(a){for(var b=this,c=null,d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState){a(b._audioNode[d]),c=!0;break}if(b._drainPool(),!c){var e;if(b._webAudio)e=b._setupAudioNode(),a(e);else{b.load(),e=b._audioNode[b._audioNode.length-1];var f=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",g=function(){e.removeEventListener(f,g,!1),a(e)};e.addEventListener(f,g,!1)}}},_drainPool:function(){var a,b=this,c=0;for(a=0;a<b._audioNode.length;a++)b._audioNode[a].paused&&c++;for(a=b._audioNode.length-1;a>=0&&!(5>=c);a--)b._audioNode[a].paused&&(b._webAudio&&b._audioNode[a].disconnect(0),c--,b._audioNode.splice(a,1))},_clearEndTimer:function(a){for(var b=this,c=0,d=0;d<b._onendTimer.length;d++)if(b._onendTimer[d].id===a){c=d;break}var e=b._onendTimer[c];e&&(clearTimeout(e.timer),b._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this,c=a._audioNode,d=a._audioNode.length;return c[d]=void 0===b.createGain?b.createGainNode():b.createGain(),c[d].gain.value=a._volume,c[d].paused=!0,c[d]._pos=0,c[d].readyState=4,c[d].connect(f),c[d].panner=b.createPanner(),c[d].panner.panningModel=a._model||"equalpower",c[d].panner.setPosition(a._pos3d[0],a._pos3d[1],a._pos3d[2]),c[d].panner.connect(c[d]),c[d]},on:function(a,b){var c=this,d=c["_on"+a];if("function"==typeof b)d.push(b);else for(var e=0;e<d.length;e++)b?d[e].call(c,b):d[e].call(c);return c},off:function(a,b){var c=this,d=c["_on"+a],e=b?""+b:null;if(e){for(var f=0;f<d.length;f++)if(e===""+d[f]){d.splice(f,1);break}}else c["_on"+a]=[];return c},unload:function(){for(var b=this,c=b._audioNode,d=0;d<b._audioNode.length;d++)c[d].paused||(b.stop(c[d].id),b.on("end",c[d].id)),b._webAudio?c[d].disconnect(0):c[d].src="";for(d=0;d<b._onendTimer.length;d++)clearTimeout(b._onendTimer[d].timer);var e=j._howls.indexOf(b);null!==e&&e>=0&&j._howls.splice(e,1),delete a[b._src],b=null}},c)var l=function(b,c){if(c in a)return b._duration=a[c].duration,void n(b);if(/^data:[^;]+;base64,/.test(c)){for(var d=atob(c.split(",")[1]),e=new Uint8Array(d.length),f=0;f<d.length;++f)e[f]=d.charCodeAt(f);m(e.buffer,b,c)}else{var g=new XMLHttpRequest;g.open("GET",c,!0),g.responseType="arraybuffer",g.onload=function(){m(g.response,b,c)},g.onerror=function(){b._webAudio&&(b._buffer=!0,b._webAudio=!1,b._audioNode=[],delete b._gainNode,delete a[c],b.load())};try{g.send()}catch(h){g.onerror()}}},m=function(c,d,e){b.decodeAudioData(c,function(b){b&&(a[e]=b,n(d,b))},function(){d.on("loaderror")})},n=function(a,b){a._duration=b?b.duration:a._duration,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play()},o=function(c,d,e){var f=c._nodeById(e);f.bufferSource=b.createBufferSource(),f.bufferSource.buffer=a[c._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=d[0],d[0]&&(f.bufferSource.loopStart=d[1],f.bufferSource.loopEnd=d[1]+d[2]),f.bufferSource.playbackRate.value=c._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:j,Howl:k}}),"undefined"!=typeof exports&&(exports.Howler=j,exports.Howl=k),"undefined"!=typeof window&&(window.Howler=j,window.Howl=k)}(),function(a,b){function c(a){return a.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function d(a){return e?e+a:a.toLowerCase()}var e,f,g,h,i,j,k,l,m,n,o="",p={Webkit:"webkit",Moz:"",O:"o"},q=window.document,r=q.createElement("div"),s=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,t={};a.each(p,function(a,c){return r.style[a+"TransitionProperty"]!==b?(o="-"+a.toLowerCase()+"-",e=c,!1):void 0}),f=o+"transform",t[g=o+"transition-property"]=t[h=o+"transition-duration"]=t[j=o+"transition-delay"]=t[i=o+"transition-timing-function"]=t[k=o+"animation-name"]=t[l=o+"animation-duration"]=t[n=o+"animation-delay"]=t[m=o+"animation-timing-function"]="",a.fx={off:e===b&&r.style.transitionProperty===b,speeds:{_default:400,fast:200,slow:600},cssPrefix:o,transitionEnd:d("TransitionEnd"),animationEnd:d("AnimationEnd")},a.fn.animate=function(c,d,e,f,g){return a.isFunction(d)&&(f=d,e=b,d=b),a.isFunction(e)&&(f=e,e=b),a.isPlainObject(d)&&(e=d.easing,f=d.complete,g=d.delay,d=d.duration),d&&(d=("number"==typeof d?d:a.fx.speeds[d]||a.fx.speeds._default)/1e3),g&&(g=parseFloat(g)/1e3),this.anim(c,d,e,f,g)},a.fn.anim=function(d,e,o,p,q){var r,u,v,w={},x="",y=this,z=a.fx.transitionEnd,A=!1;if(e===b&&(e=a.fx.speeds._default/1e3),q===b&&(q=0),a.fx.off&&(e=0),"string"==typeof d)w[k]=d,w[l]=e+"s",w[n]=q+"s",w[m]=o||"linear",z=a.fx.animationEnd;else{u=[];for(r in d)s.test(r)?x+=r+"("+d[r]+") ":(w[r]=d[r],u.push(c(r)));x&&(w[f]=x,u.push(f)),e>0&&"object"==typeof d&&(w[g]=u.join(", "),w[h]=e+"s",w[j]=q+"s",w[i]=o||"linear")}return v=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(z,v)}else a(this).unbind(z,v);A=!0,a(this).css(t),p&&p.call(this)},e>0&&(this.bind(z,v),setTimeout(function(){A||v.call(y)},1e3*e+25)),this.size()&&this.get(0).clientLeft,this.css(w),0>=e&&setTimeout(function(){y.each(function(){v.call(this)})},0),this},r=null}(Zepto),function(a){function b(b,c,d,e,f){"function"!=typeof c||f||(f=c,c=void 0);var g={opacity:d};return e&&(g.scale=e,b.css(a.fx.cssPrefix+"transform-origin","0 0")),b.animate(g,c,null,f)}function c(c,d,e,g){return b(c,d,0,e,function(){f.call(a(this)),g&&g.call(this)})}var d=window.document,e=(d.documentElement,a.fn.show),f=a.fn.hide,g=a.fn.toggle;a.fn.show=function(a,c){return e.call(this),void 0===a?a=0:this.css("opacity",0),b(this,a,1,"1,1",c)},a.fn.hide=function(a,b){return void 0===a?f.call(this):c(this,a,"0,0",b)},a.fn.toggle=function(b,c){return void 0===b||"boolean"==typeof b?g.call(this,b):this.each(function(){var d=a(this);d["none"==d.css("display")?"show":"hide"](b,c)})},a.fn.fadeTo=function(a,c,d){return b(this,a,c,null,d)},a.fn.fadeIn=function(a,b){var c=this.css("opacity");return c>0?this.css("opacity",0):c=1,e.call(this).fadeTo(a,c,b)},a.fn.fadeOut=function(a,b){return c(this,a,null,b)},a.fn.fadeToggle=function(b,c){return this.each(function(){var d=a(this);d[0==d.css("opacity")||"none"==d.css("display")?"fadeIn":"fadeOut"](b,c)})}}(Zepto),function(a){function b(a){return a.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function c(a){return d?d+a:a.toLowerCase()}var d,e,f,g,h,i,j,k,l,m,n="",o={Webkit:"webkit",Moz:"",O:"o"},p=window.document,q=p.createElement("div"),r=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,s={};a.each(o,function(a,b){return void 0!==q.style[a+"TransitionProperty"]?(n="-"+a.toLowerCase()+"-",d=b,!1):void 0}),e=n+"transform",s[f=n+"transition-property"]=s[g=n+"transition-duration"]=s[i=n+"transition-delay"]=s[h=n+"transition-timing-function"]=s[j=n+"animation-name"]=s[k=n+"animation-duration"]=s[m=n+"animation-delay"]=s[l=n+"animation-timing-function"]="",a.fx={off:void 0===d&&void 0===q.style.transitionProperty,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:c("TransitionEnd"),animationEnd:c("AnimationEnd")},a.fn.animate=function(b,c,d,e,f){return a.isFunction(c)&&(e=c,d=void 0,c=void 0),a.isFunction(d)&&(e=d,d=void 0),a.isPlainObject(c)&&(d=c.easing,e=c.complete,f=c.delay,c=c.duration),c&&(c=("number"==typeof c?c:a.fx.speeds[c]||a.fx.speeds._default)/1e3),f&&(f=parseFloat(f)/1e3),this.anim(b,c,d,e,f)},a.fn.anim=function(c,d,n,o,p){var q,t,u,v={},w="",x=this,y=a.fx.transitionEnd,z=!1;if(void 0===d&&(d=a.fx.speeds._default/1e3),void 0===p&&(p=0),a.fx.off&&(d=0),"string"==typeof c)v[j]=c,v[k]=d+"s",v[m]=p+"s",v[l]=n||"linear",y=a.fx.animationEnd;else{t=[];for(q in c)r.test(q)?w+=q+"("+c[q]+") ":(v[q]=c[q],t.push(b(q)));w&&(v[e]=w,t.push(e)),d>0&&"object"==typeof c&&(v[f]=t.join(", "),v[g]=d+"s",v[i]=p+"s",v[h]=n||"linear")}return u=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(y,u)}else a(this).unbind(y,u);z=!0,a(this).css(s),o&&o.call(this)},d>0&&(this.bind(y,u),setTimeout(function(){z||u.call(x)},1e3*d+25)),this.size()&&this.get(0).clientLeft,this.css(v),0>=d&&setTimeout(function(){x.each(function(){u.call(this)})},0),this},q=null}(Zepto);var envelopeSprite=cc.Sprite.extend({envelopeType:void 0,envelopeL:1e3,envelopeH:1e3,moveBoole:!1,DirectionType:5,moveGap:130,removed:!1,isInited:!1,moveTime:.1,downTime:.3,isdownTime:.3,fireStarAniTime:.1,isFire:!1,isStar:!1,isSameAll:!1,isOnFire:!1,isOnStar:!1,isOnSameAll:!1,isnotBomb:!1,isBomb:!1,isBombed:!1,isnormalboom:!1,normaltype:0,downnow:!1,nextpos:null,movenow:!1,addnum:1e3,ctor:function(){this._super(),this.init()},init:function(){function a(a,b){return e.movenow||e.downnow?void 0:(f=a.getLocation(),d(a))}function b(a,b){}function c(a,b){g=a.getLocation();var c=cc.pSub(g,f);Math.abs(c.y)>Math.abs(c.x)?c.y<=-15&&e.envelopeH>0?(game.envelopeTouch=!0,e.DirectionType=1):c.y>=15&&e.envelopeH<5&&(game.envelopeTouch=!0,e.DirectionType=0):Math.abs(c.y)<Math.abs(c.x)&&(c.x>=15&&e.envelopeL<4?(game.envelopeTouch=!0,e.DirectionType=3):c.x<=-15&&e.envelopeL>0&&(game.envelopeTouch=!0,e.DirectionType=2))}function d(a){var b=a.getLocation(),c=cc.rect(-75,-75,130,130);return c.x+=e.x,c.y+=e.y,cc.rectContainsPoint(c,b)}switch(this.envelopeType=GetRandomNum(0,11),this.envelopeType){case 0:this.initWithFile(res.blue_envelope);break;case 1:this.initWithFile(res.green_envelope);break;case 2:this.initWithFile(res.red_envelope);break;case 3:this.initWithFile(res.yello_envelope);break;case 4:this.initWithFile(res.pink_envelope);break;case 5:this.initWithFile(res.zi_envelope);break;case 6:this.envelopeType=0,this.initWithFile(res.blue_envelope);break;case 7:this.envelopeType=1,this.initWithFile(res.green_envelope);break;case 8:this.envelopeType=2,this.initWithFile(res.red_envelope);break;case 9:this.envelopeType=3,this.initWithFile(res.yello_envelope);break;case 10:this.envelopeType=4,this.initWithFile(res.pink_envelope);break;case 11:this.envelopeType=5,this.initWithFile(res.zi_envelope)}var e=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:a,onTouchMoved:b,onTouchEnded:c},this);var f,g},setPos:function(a,b,c){this.Stay(),this.isInited&&this.isFireOrStar();var d=cc.callFunc(function(){this.downnow=!1},this);if(this.envelopeH==b){var e=cc.delayTime(.8),f=cc.sequence(e,d);return void this.runAction(f)}this.downnow=!0,this.envelopeL=a,this.envelopeH=b;var g=62,h=78,d=cc.callFunc(function(){this.getPosition().y!=132*this.envelopeH+h&&this.setPosition(cc.p(130*this.envelopeL+g,132*this.envelopeH+h)),this.downnow=!1},this);if(this.isInited){var e=cc.delayTime(this.isdownTime),i=cc.moveTo(this.downTime,cc.p(130*a+g,132*b+h)).easing(cc.easeIn(this.isdownTime-.2)),f=cc.sequence(e,i,d);return void this.runAction(f)}if(this.setPosition(cc.p(130*a+g,50*b+h+1200)),c){var e=cc.delayTime(this.isdownTime),i=cc.moveTo(this.downTime,cc.p(130*a+g,132*b+h)).easing(cc.easeIn(this.isdownTime-.2)),f=cc.sequence(e,i,d);this.runAction(f)}else{var i=cc.moveTo(this.downTime,cc.p(130*a+g,132*b+h)).easing(cc.easeIn(this.isdownTime-.2)),f=cc.sequence(i,d);this.runAction(f)}this.isInited=!0},Big:function(){var a=cc.scaleTo(.2,1.5);this.runAction(a)},Up:function(a){this.envelopeH++,this.movenow=!0;var b,c=62,d=78,e=cc.moveTo(this.moveTime,cc.p(130*this.envelopeL+c,132*this.envelopeH+d)),f=cc.callFunc(this.Stay,this);if(a){var g=cc.callFunc(function(){this.movenow=!1},this);b=cc.sequence(cc.delayTime(.1),e,f,g)}else b=cc.sequence(e,f);this.runAction(b)},Down:function(a){this.envelopeH--,this.movenow=!0;var b,c=62,d=78,e=cc.moveTo(this.moveTime,cc.p(130*this.envelopeL+c,132*this.envelopeH+d)),f=cc.callFunc(this.Stay,this);if(a){var g=cc.callFunc(function(){this.movenow=!1},this);b=cc.sequence(cc.delayTime(.1),e,f,g)}else b=cc.sequence(e,f);this.runAction(b)},Left:function(a){this.envelopeL--,this.movenow=!0;var b,c=62,d=78,e=cc.moveTo(this.moveTime,cc.p(130*this.envelopeL+c,132*this.envelopeH+d)),f=cc.callFunc(this.Stay,this);if(a){var g=cc.callFunc(function(){this.movenow=!1},this);b=cc.sequence(cc.delayTime(.1),e,f,g)}else b=cc.sequence(e,f);this.runAction(b)},Right:function(a){this.envelopeL++,this.movenow=!0;var b,c=62,d=78,e=cc.moveTo(this.moveTime,cc.p(130*this.envelopeL+c,132*this.envelopeH+d)),f=cc.callFunc(this.Stay,this);if(a){var g=cc.callFunc(function(){this.movenow=!1},this);b=cc.sequence(cc.delayTime(.1),e,f,g)}else b=cc.sequence(e,f);this.runAction(b)},Stay:function(a){this.DirectionType=5},onStar:function(){var a=cc.textureCache.addImage(res.envelope_star),b=140,c=new cc.SpriteFrame(a,cc.rect(0*b,0,b,b+2)),d=new cc.SpriteFrame(a,cc.rect(1*b,0,b,b+2)),e=new cc.Sprite(c),f=this.getContentSize().width,g=this.getContentSize().height;e.setPosition(cc.p(f/2,g/2)),this.addChild(e);var h=[];h.push(c),h.push(d);var i=new cc.Animation(h,this.fireStarAniTime),j=cc.animate(i);e.runAction(j.repeatForever()),this.isOnStar=!0},onFire:function(){var a=cc.textureCache.addImage(res.envelope_fie),b=140,c=new cc.SpriteFrame(a,cc.rect(0*b,0,b,b)),d=new cc.SpriteFrame(a,cc.rect(1*b,0,b,b)),e=new cc.SpriteFrame(a,cc.rect(2*b,0,b,b)),f=new cc.Sprite(c),g=this.getContentSize().width,h=this.getContentSize().height;f.setPosition(cc.p(g/2,h/2)),this.addChild(f,-1);var i=[];i.push(c),i.push(d),i.push(e);var j=new cc.Animation(i,this.fireStarAniTime),k=cc.animate(j);f.runAction(k.repeatForever()),this.isOnFire=!0},isFireOrStar:function(){this.isOnFire||this.isOnStar||this.isOnSameAll||(this.isFire&&this.onFire(),this.isStar&&this.onStar(),this.isSameAll&&this.onSameAll())},onSameAll:function(){this.envelopeType=1e3;var a=cc.textureCache.addImage(res.envelope_sameall),b=140,c=new cc.SpriteFrame(a,cc.rect(0*b,0,b,b)),d=new cc.SpriteFrame(a,cc.rect(1*b,0,b,b)),e=new cc.SpriteFrame(a,cc.rect(2*b,0,b,b)),f=new cc.Sprite(c),g=this.getContentSize().width,h=this.getContentSize().height;f.setPosition(cc.p(g/2,h/2)),this.addChild(f,-1);var i=[];i.push(c),i.push(d),i.push(e);var j=new cc.Animation(i,this.fireStarAniTime),k=cc.animate(j);f.runAction(k.repeatForever());var l=cc.SpriteFrame.create(res.blue_envelope,cc.rect(0,0,92,113)),m=cc.SpriteFrame.create(res.green_envelope,cc.rect(0,0,92,113)),n=cc.SpriteFrame.create(res.red_envelope,cc.rect(0,0,92,113)),o=cc.SpriteFrame.create(res.yello_envelope,cc.rect(0,0,92,113)),p=cc.SpriteFrame.create(res.pink_envelope,cc.rect(0,0,92,113)),q=[];q.push(l),q.push(m),q.push(n),q.push(o),q.push(p);var r=new cc.Animation(q,3*this.fireStarAniTime),s=cc.animate(r);this.runAction(s.repeatForever()),this.isOnSameAll=!0}}),envelopeBomeSprite=cc.Sprite.extend({bomeL:1e3,bomeH:1e3,bomeanimate:null,isBome:!1,isFireBome:!1,isFreshBome:!1,freshtype:0,ctor:function(){this._super(),this.init()},init:function(){var a=cc.textureCache.addImage(res.envelope_bome),b=new cc.SpriteFrame(a,cc.rect(0,0,142,142)),c=new cc.SpriteFrame(a,cc.rect(142,0,142,142)),d=new cc.SpriteFrame(a,cc.rect(284,0,142,142)),e=new cc.SpriteFrame(a,cc.rect(426,0,142,142)),f=new cc.SpriteFrame(a,cc.rect(568,0,142,142)),g=[];g.push(b),g.push(c),g.push(d),g.push(e),g.push(f);var h=new cc.Animation(g,.05),i=cc.animate(h);this.initWithSpriteFrame(b),this.visible=!1;var j=cc.callFunc(function(){this.visible=!1},this);this.bomeanimate=cc.sequence(i,j);var k=cc.textureCache.addImage(res.envelope_firebome),l=new cc.SpriteFrame(k,cc.rect(0,0,142,142)),m=new cc.SpriteFrame(k,cc.rect(142,0,142,142)),n=new cc.SpriteFrame(k,cc.rect(284,0,142,142)),o=[];o.push(l),o.push(m),o.push(n);var p=new cc.Animation(o,.05),q=cc.animate(p),r=cc.callFunc(function(){this.visible=!1},this);this.firebomeanimate=cc.sequence(q,r);var s=cc.textureCache.addImage(res.envelope_star),t=140,u=new cc.SpriteFrame(s,cc.rect(0*t,0,t,t+2)),v=new cc.SpriteFrame(s,cc.rect(1*t,0,t,t+2)),w=[];w.push(u),w.push(v);var x=new cc.Animation(w,.05),y=cc.animate(x).repeat(8),z=cc.callFunc(function(){this.visible=!1},this);this.freshbomeanimate=cc.sequence(y,z);var A=cc.textureCache.addImage(res.envelope_freshh),t=140,B=new cc.SpriteFrame(A,cc.rect(0*t,0,t,t+2)),C=new cc.SpriteFrame(A,cc.rect(1*t,0,t,t+2)),D=[];D.push(B),D.push(C);var E=new cc.Animation(D,.05),F=cc.animate(E).repeat(8),G=cc.callFunc(function(){this.visible=!1},this);this.freshbomeanimateh=cc.sequence(F,G);var H=cc.textureCache.addImage(res.envelope_freshl),t=140,I=new cc.SpriteFrame(H,cc.rect(0*t,0,t,t+2)),J=new cc.SpriteFrame(H,cc.rect(1*t,0,t,t+2)),K=[];K.push(I),K.push(J);var L=new cc.Animation(K,.05),M=cc.animate(L).repeat(16),G=cc.callFunc(function(){this.visible=!1},this);this.freshbomeanimatel=cc.sequence(M,G)},setPos:function(a,b){this.envelopeL=a,this.envelopeH=b;var c=62,d=84;this.setPosition(cc.p(130*a+c,130*b+d)),this.isInited=!0},bome:function(){this.isBome&&(this.visible=!0,this.runAction(this.bomeanimate),this.isFreshBome=!1,this.isBome=!1,this.isFireBome=!1)},firebome:function(){this.isFireBome&&(this.visible=!0,this.runAction(this.firebomeanimate),this.isFreshBome=!1,this.isBome=!1,this.isFireBome=!1)},selectBome:function(){this.isFireBome?this.firebome():this.isFreshBome?this.freshbome():this.isBome&&this.bome()},freshbome:function(){console.log("fresh"),this.isFreshBome&&(this.visible=!0,0==this.freshtype?this.runAction(this.freshbomeanimate):1==this.freshtype?this.runAction(this.freshbomeanimatel):2==this.freshtype&&this.runAction(this.freshbomeanimateh),this.isFreshBome=!1,this.isBome=!1,this.isFireBome=!1)}}),loadingSprite=cc.Sprite.extend({textureWidth:null,textureHeight:null,ctor:function(){this._super(),this.init()},init:function(){this.initWithFile(res.time_loading),this.textureWidth=this.getContentSize().width,this.textureHeight=this.getContentSize().height,this.setPosition(13,842),this.setAnchorPoint(0,.5)},setPrecent:function(a){var b=this.getTextureRect(),c=a/100;this.setTextureRect(cc.rect(b.x,b.y,this.textureWidth*c,this.textureHeight))}}),EndScene=cc.Scene.extend({onEnter:function(){this._super(),this.init()},init:function(){var a=cc.director.getWinSize(),b=cc.Sprite.create(res.main_bg);b.setPosition(a.width/2,a.height/2),this.addChild(b,0);var c=new cc.MenuItemImage(res.playagain,res.playagain,function(){game.resetGame();new BeginScene;cc.director.runScene(new BeginScene)},this);c.setPosition(1,-150);var d=new cc.Menu(c);this.addChild(d,1);var e=new cc.LabelTTF("游戏结束","90",40,cc.size(160,50),cc.TEXT_ALIGNMENT_LEFT);e.x=cc.winSize.width/2,e.y=cc.winSize.height-200,this.addChild(e,10)}}),BeginScene=cc.Scene.extend({ctor:function(){this._super(),this.init()},init:function(){var a=cc.director.getWinSize();$(".dialog-box-share").on("click",function(){$(this).hide()});var b=cc.Sprite.create(res.begin_bg);b.setPosition(a.width/2,a.height/2),this.addChild(b,0);var c=new cc.MenuItemImage(res.begin_but,res.begin_but,function(){cc.director.runScene(new MyScene)},this);c.setPosition(0,-a.height/6);var d=new cc.Menu(c);this.addChild(d,1),this.returnRound(res.round_1,5,1080),this.returnRound(res.round_2,3,360),this.returnRound(res.round_3,7,-720)},onExit:function(){this.removeAllChildrenWithCleanup(!0)},returnRound:function(a,b,c){var d=cc.director.getWinSize(),e=cc.Sprite.create(a);e.setPosition(d.width/2,d.height/3),this.addChild(e,0);var c=cc.rotateBy(b,c),f=cc.sequence(c,c.reverse()).repeatForever();e.runAction(f)}}),game=null,Game=cc.Class.extend({score:0,time:7,inittime:7,alltime:14,envelopeTouch:!1,gamecanotouch:!1,init:function(){var a=[];this.pushRublish=function(b){a.push(b)},this.removeAllobj=function(b){for(var c=0;c<=a.length-1;c++)b.removeChild(a[c]);a=[]}},resetGame:function(){this.score=0,this.time=this.inittime}});game=new Game,game.init();var MyScene=cc.Scene.extend({gameLayer:{barlayer:40,touchlayer:30,showlayer:20},tick:0,showLayer:null,envelopeSpriteArr:null,envelopeRublishArr:[],envelopeBomeSpriteArr:[],playerSprite:null,topLab:null,topLayer:null,spriteword:null,spritebg:null,gesprite:null,shisprite:null,checkSameAllL:[],checkSameAllH:[],bomb:[],combotimes:0,resettime:0,checkdownnow:!1,onEnter:function(){this._super(),this.init()},init:function(){function a(a,b){}function b(a,b){}function c(a,b){}this.showLayer=cc.Layer.create(),this.addChild(this.showLayer,this.gameLayer.showlayer),this.envelopeSpriteArr=[];for(var d=0;4>=d;d++)this.envelopeSpriteArr[d]=[];this.envelopeBomeSpriteArr=[];for(var d=0;4>=d;d++)this.envelopeBomeSpriteArr[d]=[];var e=cc.director.getWinSize(),f=cc.Sprite.create(res.main_bg);f.setPosition(e.width/2,f.getContentSize().height/2),this.showLayer.addChild(f);var g=cc.Layer.create(),h=cc.Sprite.create(res.top_bar);h.setPosition(e.width/2,e.height-h.getContentSize().height/2),g.addChild(h),this.timeLoadingBar=new loadingSprite,this.timeLoadingBar.setPrecent(50),g.addChild(this.timeLoadingBar),this.topLab=new cc.LabelTTF(game.score+"","70",90,cc.size(270,90),cc.TEXT_ALIGNMENT_CENTER),g.addChild(this.topLab,10),this.topLab.fillStyle=cc.color(255,230,0,255),this.addChild(g,this.gameLayer.barlayer),this.topLab.x=305,this.topLab.y=930,this.topLayer=g;var i=!0,j=new cc.MenuItemImage(res.refresh_but,res.refresh_but,function(){if(i){i=!1;for(var a=0;4>=a;a++)for(var b=0;5>=b;b++)this.showLayer.removeChild(this.envelopeSpriteArr[a][b]);this.envelopeSpriteArr=[];for(var c=0;4>=c;c++)this.envelopeSpriteArr[c]=[];this.initAddEnvelopeSprites(),j.setColor(cc.color(100,100,0,255));var d=cc.delayTime(7),e=cc.callFunc(function(){i=!0,j.setColor(cc.color(255,255,255,255))},this);this.runAction(cc.sequence(d,e))}},this);j.setPosition(210,430);var k=new cc.Menu(j);g.addChild(k,1);var l=cc.Layer.create();cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:a,onTouchMoved:b,onTouchEnded:c},l),this.spriteword=new cc.Sprite(res.combo_word),this.spritebg=new cc.Sprite(res.combo_bg),this.spriteword.setScale(.7),this.spritebg.setScale(.7),this.topLayer.addChild(this.spritebg,20),this.topLayer.addChild(this.spriteword,20),this.spriteword.setPosition(cc.p(e.width/2,890)),this.spritebg.setPosition(cc.p(e.width/2,890));var m=cc.textureCache.addImage(res.combo_num),n=61.9,o=182,p=new cc.SpriteFrame(m,cc.rect(0*n,0*o,n,o));this.gesprite=new cc.Sprite(p);var q=new cc.SpriteFrame(m,cc.rect(0*n,0*o,n,o));this.shisprite=new cc.Sprite(q),this.gesprite.setScale(.7),this.shisprite.setScale(.7),this.gesprite.setPosition(cc.p(e.width/2+30,890)),this.shisprite.setPosition(cc.p(e.width/2+30,890)),this.topLayer.addChild(this.gesprite,20),this.topLayer.addChild(this.shisprite,20),this.spriteword.setVisible(!1),this.spritebg.setVisible(!1),this.shisprite.setVisible(!1),this.gesprite.setVisible(!1);var r=cc.director.getScheduler(),s=0,t=!1;r.scheduleUpdateForTarget(this,s,t),this.initAddEnvelopeSprites()},update:function(a){if(this.tick++,this.tick%60==0&&(game.time>=0?(this.timeLoadingBar.setPrecent(game.time/14*100|0),game.time--):game.time<0?(this.timeLoadingBar.setPrecent(0),game.time=0):game.time>=game.alltime&&(this.timeLoadingBar.setPrecent(100),game.time=game.alltime,game.time--),0==game.time&&cc.director.runScene(new EndScene)),game.envelopeTouch){game.envelopeTouch=!1;for(var b=0;4>=b;b++)for(var c=0;5>=c;c++)if(5!=this.envelopeSpriteArr[b][c].DirectionType){var d=this.envelopeSpriteArr[b][c].DirectionType;return void this.envelopeMoveOther(b,c,d)}}this.showComboLab()},onExit:function(){this.unscheduleUpdate(),this.removeAllChildrenWithCleanup(!0)},initAddEnvelopeSprites:function(){for(var a=0;4>=a;a++)for(var b=0;5>=b;b++){var c=new envelopeBomeSprite;c.setPos(a,b),this.showLayer.addChild(c),this.envelopeBomeSpriteArr[a][b]=c}for(var a=0;4>=a;a++)for(var b=0;5>=b;b++){var d=new envelopeSprite;d.setPos(a,b),this.showLayer.addChild(d),this.envelopeSpriteArr[a][b]=d}var e=cc.delayTime(.6),f=cc.callFunc(function(){this.changAllEvelope()},this),g=cc.sequence(e,f);this.runAction(g)},envelopeMoveOther:function(a,b,c){var d,e;switch(c){case 0:if(d=a,e=b+1,this.envelopeSpriteArr[d][e].downnow)return;if(this.envelopeSpriteArr[d][e].movenow)return;this.envelopeSpriteArr[d][e].Down(),this.envelopeSpriteArr[a][b].Up();break;case 1:if(d=a,e=b-1,this.envelopeSpriteArr[d][e].downnow)return;if(this.envelopeSpriteArr[d][e].movenow)return;this.envelopeSpriteArr[d][e].Up(),this.envelopeSpriteArr[a][b].Down();break;case 2:if(d=a-1,e=b,this.envelopeSpriteArr[d][e].downnow)return;if(this.envelopeSpriteArr[d][e].movenow)return;this.envelopeSpriteArr[d][e].Right(),this.envelopeSpriteArr[a][b].Left();break;case 3:if(d=a+1,e=b,this.envelopeSpriteArr[d][e].downnow)return;if(this.envelopeSpriteArr[d][e].movenow)return;this.envelopeSpriteArr[d][e].Left(),this.envelopeSpriteArr[a][b].Right()}this.envelopeSpriteArr[d][e].movenow=!0,this.envelopeSpriteArr[a][b].movenow=!0;var f=this.envelopeSpriteArr[a][b];this.envelopeSpriteArr[a][b]=this.envelopeSpriteArr[d][e],this.envelopeSpriteArr[d][e]=f;var g=c,h=cc.delayTime(0),i=cc.callFunc(function(){this.changAllEvelope(!0,a,b,d,e,g)},this),j=cc.sequence(h,i);this.runAction(j)},changAllEvelope:function(a,b,c,d,e,f){if(a){if(this.envelopeSpriteArr[b][c].isOnSameAll){var g=this.envelopeSpriteArr[d][e].envelopeType;return void this.sameAllBome(g,b,c)}if(this.envelopeSpriteArr[d][e].isOnSameAll){var g=this.envelopeSpriteArr[b][c].envelopeType;return void this.sameAllBome(g,d,e)}}for(var h=1,i=2,j=0;4>=j;j++)this.checkEvelopeSpriteArr(h,j,b,c,d,e,a);for(var j=0;5>=j;j++)this.checkEvelopeSpriteArr(i,j,b,c,d,e,a);this.checkdownnow=!0,this.checkSameAll();for(var j=0;4>=j;j++)this.spliceEnvelopeSprite(j,0,0);if(0==this.envelopeRublishArr.length){if(a){var g=f,k=b,l=c,m=d,n=e;switch(g){case 0:this.envelopeSpriteArr[k][l].Up(!0),this.envelopeSpriteArr[m][n].Down(!0);break;case 1:this.envelopeSpriteArr[k][l].Down(!0),this.envelopeSpriteArr[m][n].Up(!0);break;case 2:this.envelopeSpriteArr[k][l].Left(!0),this.envelopeSpriteArr[m][n].Right(!0);break;case 3:this.envelopeSpriteArr[k][l].Right(!0),this.envelopeSpriteArr[m][n].Left(!0)}var o=this.envelopeSpriteArr[m][n];this.envelopeSpriteArr[m][n]=this.envelopeSpriteArr[k][l],this.envelopeSpriteArr[k][l]=o}if(0!=this.combotimes){if(this.combotimes>=2){var p=cc.director.getWinSize();this.showScoreLab(100*this.combotimes,4,6,cc.p(p.width/2+80,920)),game.score+=100*this.combotimes}this.combotimes=0,this.spriteword.setVisible(!1),this.spritebg.setVisible(!1),this.shisprite.setVisible(!1),this.gesprite.setVisible(!1)}return this.allEnvelopeSpriteSetPos(),void(this.checkdownnow=!1)}for(var b=0;4>=b;b++)for(var c=0;5>=c;c++)void 0!=this.envelopeSpriteArr[b][c]&&(this.envelopeSpriteArr[b][c].movenow=!1);this.changeEvelopeSpriteArr()},checkEvelopeSpriteArr:function(a,b,c,d,e,f,g){var h=0,i=0;if(1==a){for(var j,k,l=this.envelopeSpriteArr[b][0].envelopeType,m=!1,n=0;5>=n;n++)if(void 0!=this.envelopeSpriteArr[b][n]){if(l==this.envelopeSpriteArr[b][n].envelopeType&&h++,l!=this.envelopeSpriteArr[b][n].envelopeType){if(h>=3){i=n,this.combotimes++;for(var o=0;5>=o;o++)this.envelopeSpriteArr[b][o].downnow=!0;for(var p=1;h>=p;p++)this.envelopeSpriteArr[b][i-p].removed=!0,this.envelopeBomeSpriteArr[b][i-p].isBome=!0,this.envelopeSpriteArr[b][i-p].isBomb&&(j=b,k=i-p,m=!0);m&&this.changeBomb(j,k),3==h&&(this.checkSameAllL[b]=i,this.envelopeSpriteArr[b][i-2].isnormalboom=!0,this.envelopeSpriteArr[b][i-2].normaltype=1),4==h&&(g?b==c?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isFire=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isFire=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[b][i-2].removed=!1,this.envelopeSpriteArr[b][i-2].isFire=!0,this.envelopeSpriteArr[b][i-2].isBomb=!0)),5==h&&(g?b==c?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isStar=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isStar=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[b][i-2].removed=!1,this.envelopeSpriteArr[b][i-2].isStar=!0,this.envelopeSpriteArr[b][i-2].isBomb=!0))}i=0,h=1,l=this.envelopeSpriteArr[b][n].envelopeType,m=!1}if(5==n&&h>=3){this.combotimes++,i=n;for(var o=0;5>=o;o++)this.envelopeSpriteArr[b][o].downnow=!0;for(var p=0;h-1>=p;p++)this.envelopeSpriteArr[b][i-p].removed=!0,this.envelopeBomeSpriteArr[b][i-p].isBome=!0,this.envelopeSpriteArr[b][i-p].isBomb&&(j=b,k=i-p,m=!0);m&&this.changeBomb(j,k),3==h&&(this.checkSameAllL[b]=i,this.envelopeSpriteArr[b][i-1].isnormalboom=!0,this.envelopeSpriteArr[b][i-1].normaltype=1),4==h&&(g?b==c?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isFire=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isFire=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[b][i-2].removed=!1,this.envelopeSpriteArr[b][i-2].isFire=!0,this.envelopeSpriteArr[b][i-2].isBomb=!0)),5==h&&(g?b==c?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isStar=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isStar=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[b][i-2].removed=!1,this.envelopeSpriteArr[b][i-2].isStar=!0,this.envelopeSpriteArr[b][i-2].isBomb=!0))}}}else for(var j,k,l=this.envelopeSpriteArr[0][b].envelopeType,m=!1,n=0;4>=n;n++)if(void 0!=this.envelopeSpriteArr[n][b]){if(l==this.envelopeSpriteArr[n][b].envelopeType&&h++,l!=this.envelopeSpriteArr[n][b].envelopeType){if(h>=3){this.combotimes++,i=n;for(var p=1;h>=p;p++){for(var o=0;5>=o;o++)this.envelopeSpriteArr[i-p][o].downnow=!0;this.envelopeSpriteArr[i-p][b].removed=!0,this.envelopeBomeSpriteArr[i-p][b].isBome=!0,this.envelopeSpriteArr[i-p][b].isBomb&&(j=i-p,m=!0,k=b)}m&&this.changeBomb(j,k),3==h&&(this.checkSameAllH.push(b),this.envelopeSpriteArr[i-2][b].isnormalboom=!0,this.envelopeSpriteArr[i-2][b].normaltype=2),4==h&&(g?b==d?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isFire=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,
this.envelopeSpriteArr[e][f].isFire=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[i-2][b].removed=!1,this.envelopeSpriteArr[i-2][b].isFire=!0,this.envelopeSpriteArr[i-2][b].isBomb=!0)),5==h&&(this.combotimes++,g?b==d?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isStar=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isStar=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[i-2][b].removed=!1,this.envelopeSpriteArr[i-2][b].isStar=!0,this.envelopeSpriteArr[i-2][b].isBomb=!0))}h=1,l=this.envelopeSpriteArr[n][b].envelopeType,i=0,m=!1}if(4==n&&h>=3){this.combotimes++,i=n;for(var p=0;h-1>=p;p++){for(var o=0;5>=o;o++)this.envelopeSpriteArr[i-p][o].downnow=!0;this.envelopeSpriteArr[i-p][b].removed=!0,this.envelopeBomeSpriteArr[i-p][b].isBome=!0,this.envelopeSpriteArr[i-p][b].isBomb&&(j=i-p,k=b,m=!0)}m&&this.changeBomb(j,k),3==h&&(this.checkSameAllH.push(b),this.envelopeSpriteArr[i-1][b].isnormalboom=!0,this.envelopeSpriteArr[i-1][b].normaltype=2),4==h&&(g?b==d?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isFire=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isFire=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[i-2][b].removed=!1,this.envelopeSpriteArr[i-2][b].isFire=!0,this.envelopeSpriteArr[i-2][b].isBomb=!0)),5==h&&(g?b==d?(this.envelopeSpriteArr[c][d].removed=!1,this.envelopeSpriteArr[c][d].isStar=!0,this.envelopeSpriteArr[c][d].isBomb=!0):(this.envelopeSpriteArr[e][f].removed=!1,this.envelopeSpriteArr[e][f].isStar=!0,this.envelopeSpriteArr[e][f].isBomb=!0):(this.envelopeSpriteArr[i-2][b].removed=!1,this.envelopeSpriteArr[i-2][b].isStar=!0,this.envelopeSpriteArr[i-2][b].isBomb=!0))}}},checkSameAll:function(){for(var a=0;4>=a;a++)for(var b=0;5>=b;b++)if(this.envelopeSpriteArr[a][b].isnormalboom&&1==this.envelopeSpriteArr[a][b].normaltype){if(0!=b){if(0!=a&&this.envelopeSpriteArr[a-1][b-1].isnormalboom)return this.envelopeSpriteArr[a][b-1].removed=!1,void(this.envelopeSpriteArr[a][b-1].isSameAll=!0);if(4!=a&&this.envelopeSpriteArr[a+1][b-1].isnormalboom)return this.envelopeSpriteArr[a][b-1].removed=!1,void(this.envelopeSpriteArr[a][b-1].isSameAll=!0)}if(5!=b){if(0!=a&&this.envelopeSpriteArr[a-1][b+1].isnormalboom)return this.envelopeSpriteArr[a][b+1].removed=!1,void(this.envelopeSpriteArr[a][b+1].isSameAll=!0);if(4!=a&&this.envelopeSpriteArr[a+1][b+1].isnormalboom)return this.envelopeSpriteArr[a][b+1].removed=!1,void(this.envelopeSpriteArr[a][b+1].isSameAll=!0)}}},spliceEnvelopeSprite:function(a,b,c){var d=c;if(5>=d)if(d++,this.envelopeSpriteArr[a][b].removed)this.envelopeRublishArr.push(this.envelopeSpriteArr[a][b]),this.envelopeSpriteArr[a].splice(b,1),this.spliceEnvelopeSprite(a,b,d);else{var e=b;e++,this.spliceEnvelopeSprite(a,e,d)}},changeEvelopeSpriteArr:function(){for(var a=0;a<=this.envelopeRublishArr.length-1;a++)this.envelopeRublishArr[a].isnormalboom&&!this.envelopeRublishArr[a].isnotBomb&&this.showScoreLab(300,this.envelopeRublishArr[a].envelopeL,this.envelopeRublishArr[a].envelopeH),this.showLayer.removeChild(this.envelopeRublishArr[a]);for(var b=0;b<=this.envelopeSpriteArr.length-1;b++)for(var c=0;c<=this.envelopeSpriteArr[b].length-1;c++)this.envelopeSpriteArr[b][c].isFire&&!this.envelopeSpriteArr[b][c].isOnFire&&this.showScoreLab(500,this.envelopeSpriteArr[b][c].envelopeL,this.envelopeSpriteArr[b][c].envelopeH),this.envelopeSpriteArr[b][c].isStar&&!this.envelopeSpriteArr[b][c].isOnStar&&this.showScoreLab(500,this.envelopeSpriteArr[b][c].envelopeL,this.envelopeSpriteArr[b][c].envelopeH),this.envelopeSpriteArr[b][c].isSameAll&&!this.envelopeSpriteArr[b][c].isOnSameAll&&this.showScoreLab(500,this.envelopeSpriteArr[b][c].envelopeL,this.envelopeSpriteArr[b][c].envelopeH);game.time+=.5*this.envelopeRublishArr.length,game.time>=game.alltime&&(game.time=game.alltime),this.envelopeRublishArr=[],this.topLab.string=game.score;for(var b=0;4>=b;b++)for(var c=0;5>=c;c++)this.envelopeBomeSpriteArr[b][c].selectBome();for(var a=0;4>=a;a++)if(this.envelopeSpriteArr[a].length<6)for(var d=6-this.envelopeSpriteArr[a].length,e=0;d-1>=e;e++){var f=new envelopeSprite;f.addnum=e,this.showLayer.addChild(f),this.envelopeSpriteArr[a].push(f)}this.allEnvelopeSpriteSetPos();var g=cc.delayTime(.6),h=cc.callFunc(function(){this.changAllEvelope()},this),i=cc.sequence(g,h);this.runAction(i)},allEnvelopeSpriteSetPos:function(){for(var a=0;4>=a;a++)for(var b=0;5>=b;b++)void 0!=this.envelopeSpriteArr[a][b]&&this.envelopeSpriteArr[a][b].setPos(a,b,!0)},changeBomb:function(a,b){if(!this.envelopeSpriteArr[a][b].isBombed){var c=0,d=[];if(this.envelopeSpriteArr[a][b].removed=!0,this.envelopeSpriteArr[a][b].isnotBomb=!0,this.envelopeSpriteArr[a][b].isBombed=!0,this.envelopeSpriteArr[a][b].isOnFire){if(this.envelopeBomeSpriteArr[a][b].isFireBome=!0,c++,a>0){if(this.envelopeSpriteArr[a-1][b].removed=!0,this.envelopeBomeSpriteArr[a-1][b].isFireBome=!0,this.envelopeSpriteArr[a-1][b].isnotBomb=!0,this.envelopeSpriteArr[a-1][b].isBomb){var e={x:a-1,y:b};d.push(e)}if(c++,b>0&&(this.envelopeSpriteArr[a-1][b-1].removed=!0,this.envelopeBomeSpriteArr[a-1][b-1].isFireBome=!0,this.envelopeSpriteArr[a-1][b-1].isnotBomb=!0,c++,this.envelopeSpriteArr[a-1][b-1].isBomb)){var e={x:a-1,y:b-1};d.push(e)}if(5>b&&(this.envelopeSpriteArr[a-1][b+1].removed=!0,this.envelopeBomeSpriteArr[a-1][b+1].isFireBome=!0,this.envelopeSpriteArr[a-1][b+1].isnotBomb=!0,c++,this.envelopeSpriteArr[a-1][b+1].isBomb)){var e={x:a-1,y:b+1};d.push(e)}}if(4>a){if(this.envelopeSpriteArr[a+1][b].removed=!0,this.envelopeBomeSpriteArr[a+1][b].isFireBome=!0,this.envelopeSpriteArr[a+1][b].isnotBomb=!0,c++,this.envelopeSpriteArr[a+1][b].isBomb){var e={x:a+1,y:b};d.push(e)}if(b>0&&(this.envelopeSpriteArr[a+1][b-1].removed=!0,this.envelopeBomeSpriteArr[a+1][b-1].isFireBome=!0,this.envelopeSpriteArr[a+1][b-1].isnotBomb=!0,c++,this.envelopeSpriteArr[a+1][b-1].isBomb)){var e={x:a+1,y:b-1};d.push(e)}if(5>b&&(this.envelopeSpriteArr[a+1][b+1].removed=!0,this.envelopeBomeSpriteArr[a+1][b+1].isFireBome=!0,this.envelopeSpriteArr[a+1][b+1].isnotBomb=!0,c++,this.envelopeSpriteArr[a+1][b+1].isBomb)){var e={x:a+1,y:b+1};d.push(e)}}if(b>0&&(this.envelopeSpriteArr[a][b-1].removed=!0,this.envelopeBomeSpriteArr[a][b-1].isFireBome=!0,this.envelopeSpriteArr[a][b-1].isnotBomb=!0,c++,this.envelopeSpriteArr[a][b-1].isBomb)){var e={x:a,y:b-1};d.push(e)}if(5>b&&(this.envelopeSpriteArr[a][b+1].removed=!0,this.envelopeBomeSpriteArr[a][b+1].isFireBome=!0,this.envelopeSpriteArr[a][b+1].isnotBomb=!0,c++,this.envelopeSpriteArr[a][b+1].isBomb)){var e={x:a,y:b+1};d.push(e)}this.showScoreLab(100*c+500,a,b)}else if(this.envelopeSpriteArr[a][b].isOnStar){for(var f=0;5>=f;f++)if(this.envelopeSpriteArr[a][f].removed=!0,this.envelopeBomeSpriteArr[a][f].isFreshBome=!0,this.envelopeBomeSpriteArr[a][f].freshtype=1,this.envelopeSpriteArr[a][f].isnotBomb=!0,this.envelopeSpriteArr[a][f].isBomb){var e={x:a,y:f};d.push(e)}for(var f=0;4>=f;f++)if(this.envelopeSpriteArr[f][b].removed=!0,this.envelopeBomeSpriteArr[f][b].isFreshBome=!0,this.envelopeBomeSpriteArr[f][b].freshtype=2,this.envelopeSpriteArr[f][a].isnotBomb=!0,this.envelopeSpriteArr[f][a].isBomb){var e={x:f,y:b};d.push(e)}this.envelopeBomeSpriteArr[a][b].isFreshBome=!0,this.envelopeBomeSpriteArr[a][b].freshtype=0,this.showScoreLab(1700,a,b)}for(var f=0;f<=d.length-1;f++)this.changeBomb(d[f].x,d[f].y)}},sameAllBome:function(a,b,c){this.combotimes++;for(var d=0,e=0;4>=e;e++)for(var f=0;5>=f;f++)this.envelopeSpriteArr[e][f].envelopeType==a&&(this.envelopeSpriteArr[e][f].removed=!0,this.envelopeBomeSpriteArr[e][f].isBome=!0,this.envelopeSpriteArr[e][f].Big(),this.envelopeSpriteArr[e][f].isBomb&&this.changeBomb(e,f),d++);this.showScoreLab(100*d+600,b,c),this.envelopeSpriteArr[b][c].Big(),this.envelopeSpriteArr[b][c].removed=!0,this.envelopeBomeSpriteArr[b][c].isBome=!0;for(var g=0;4>=g;g++)this.spliceEnvelopeSprite(g,0,0);var h=cc.delayTime(.2),i=cc.callFunc(function(){this.changeEvelopeSpriteArr()},this),j=cc.sequence(h,i);this.runAction(j)},showComboLab:function(a){this.combotimes>1&&(this.spriteword.setVisible(!0),this.spritebg.setVisible(!0),this.gesprite.setVisible(!0));var b=cc.director.getWinSize(),c=cc.textureCache.addImage(res.combo_num),d=61.9,e=182;if(this.combotimes<10){var f=new cc.SpriteFrame(c,cc.rect(d*this.combotimes,0*e,d,e));this.gesprite.setSpriteFrame(f),this.gesprite.setPosition(cc.p(b.width/2+150,890))}else{var g=this.combotimes%10;this.shisprite.setVisible(!0);var f=new cc.SpriteFrame(c,cc.rect(d*g,0*e,d,e));this.gesprite.setSpriteFrame(f),this.gesprite.setPosition(cc.p(b.width/2+185,890));var h=this.combotimes/10,i=new cc.SpriteFrame(c,cc.rect(d*h,0*e,d,e));this.shisprite.setSpriteFrame(i),this.shisprite.setPosition(cc.p(b.width/2+150,890))}},showScoreLab:function(a,b,c,d){game.score+=a;var e=112,f=78,g=new cc.LabelTTF(a+"","90",40,cc.size(160,50),cc.TEXT_ALIGNMENT_LEFT);this.topLayer.addChild(g,10),g.fillStyle=cc.color(255,255,255,255),g.setPosition(cc.p(130*b+e,132*c+f)),void 0!=d&&g.setPosition(d);var h=cc.moveBy(1,cc.p(0,200)),i=cc.fadeOut(2),j=cc.spawn(h,i),k=cc.callFunc(function(){this.topLayer.removeChild(g)},this),l=cc.sequence(j,k);g.runAction(l)}}),MyLoaderScene=cc.Scene.extend({_interval:null,_length:0,_count:0,_label:null,_className:"MyLoaderScene",init:function(){var a=this,b=a._bgLayer=cc.LayerColor.create(cc.color(32,32,32,255));b.setPosition(cc.visibleRect.bottomLeft),a.addChild(b,0);var c=24,d=cc.director.getWinSize();cc.loader.loadImg("res/loadingpage.jpg",{isCrossOrigin:!1},function(a,c){var e=cc.Sprite.create("res/loadingpage.jpg");e.setPosition(d.width/2,d.height/2),e.setScale(2),b.addChild(e,0)});var e=a._label=cc.LabelTTF.create("Loading... 0%","Arial",c);return e.setPosition(d.width/2,d.height/2-200),e.setColor(cc.color(255,255,255)),b.addChild(this._label,10),!0},_initStage:function(a,b){var c=this,d=c._texture2d=new cc.Texture2D;d.initWithElement(a),d.handleLoadedTexture();var e=c._logo=cc.Sprite.create(d);e.setScale(cc.contentScaleFactor()),e.x=b.x,e.y=b.y,c._bgLayer.addChild(e,10)},onEnter:function(){var a=this;cc.Node.prototype.onEnter.call(a),a.schedule(a._startLoading,.3)},onExit:function(){cc.Node.prototype.onExit.call(this);var a="Loading... 100%";this._label.setString(a)},initWithResources:function(a,b){"string"==typeof a&&(a=[a]),this.resources=a||[],this.cb=b},_startLoading:function(){var a=this;a.unschedule(a._startLoading);var b=a.resources;cc.loader.load(b,function(b,c,d){var e=d/c*100|0;e=Math.min(e,100),a._label.setString("Loading... "+e+"%")},function(){a.cb&&a.cb()})},_updatePercent:function(){var a=this,b=a._count,c=a._length,d=b/c*100|0;d=Math.min(d,100),a._label.setString("Loading... "+d+"%"),b>=c&&a.unschedule(a._updatePercent)}});MyLoaderScene.preload=function(a,b){var c=null;return c||(c=new MyLoaderScene,c.init()),c.initWithResources(a,b),cc.director.runScene(c),c};var thisismobile=!1;thisismobile=/AppleWebKit.*Mobile/i.test(navigator.userAgent)||/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(navigator.userAgent)?!0:!1;